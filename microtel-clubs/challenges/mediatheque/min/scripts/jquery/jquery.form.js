(function(h){var j={};j.fileapi=h("<input type='file'/>").get(0).files!==undefined;j.formdata=window.FormData!==undefined;h.fn.ajaxSubmit=function(T){if(!this.length){i("ajaxSubmit: skipping submit process - no element selected");return this}var U,b,R,P=this;if(typeof T=="function"){T={success:T}}U=this.attr("method");b=this.attr("action");R=(typeof b==="string")?h.trim(b):"";R=R||window.location.href||"";if(R){R=(R.match(/^([^#]+)/)||[])[1]}T=h.extend(true,{url:R,success:h.ajaxSettings.success,type:U||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},T);var H={};this.trigger("form-pre-serialize",[this,T,H]);if(H.veto){i("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(T.beforeSerialize&&T.beforeSerialize(this,T)===false){i("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var Q=T.traditional;if(Q===undefined){Q=h.ajaxSettings.traditional}var M=[];var K,J=this.formToArray(T.semantic,M);if(T.data){T.extraData=T.data;K=h.param(T.data,Q)}if(T.beforeSubmit&&T.beforeSubmit(J,this,T)===false){i("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[J,this,T,H]);if(H.veto){i("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var d=h.param(J,Q);if(K){d=(d?(d+"&"+K):K)}if(T.type.toUpperCase()=="GET"){T.url+=(T.url.indexOf("?")>=0?"&":"?")+d;T.data=null}else{T.data=d}var F=[];if(T.resetForm){F.push(function(){P.resetForm()})}if(T.clearForm){F.push(function(){P.clearForm(T.includeHidden)})}if(!T.dataType&&T.target){var S=T.success||function(){};F.push(function(m){var l=T.replaceTarget?"replaceWith":"html";h(T.target)[l](m).each(S,arguments)})}else{if(T.success){F.push(T.success)}}T.success=function(n,r,m){var o=T.context||this;for(var p=0,l=F.length;p<l;p++){F[p].apply(o,[n,r,m||P,P])}};var L=h('input[type=file]:enabled[value!=""]',this);var O=L.length>0;var a="multipart/form-data";var e=(P.attr("enctype")==a||P.attr("encoding")==a);var k=j.fileapi&&j.formdata;i("fileAPI :"+k);var N=(O||e)&&!k;var q;if(T.iframe!==false&&(T.iframe||N)){if(T.closeKeepAlive){h.get(T.closeKeepAlive,function(){q=G(J)})}else{q=G(J)}}else{if((O||e)&&k){q=I(J)}else{q=h.ajax(T)}}P.removeData("jqxhr").data("jqxhr",q);for(var c=0;c<M.length;c++){M[c]=null}this.trigger("form-submit-notify",[this,T]);return this;function V(n){var m=h.param(n).split("&");var r=m.length;var l=[];var o,p;for(o=0;o<r;o++){m[o]=m[o].replace(/\+/g," ");p=m[o].split("=");l.push([decodeURIComponent(p[0]),decodeURIComponent(p[1])])}return l}function I(r){var l=new FormData();for(var p=0;p<r.length;p++){l.append(r[p].name,r[p].value)}if(T.extraData){var m=V(T.extraData);for(p=0;p<m.length;p++){if(m[p]){l.append(m[p][0],m[p][1])}}}T.data=null;var n=h.extend(true,{},h.ajaxSettings,T,{contentType:false,processData:false,cache:false,type:U||"POST"});if(T.uploadProgress){n.xhr=function(){var s=jQuery.ajaxSettings.xhr();if(s.upload){s.upload.addEventListener("progress",function(v){var w=0;var u=v.loaded||v.position;var t=v.total;if(v.lengthComputable){w=Math.ceil(u/t*100)}T.uploadProgress(v,u,t,w)},false)}return s}}n.data=null;var o=n.beforeSend;n.beforeSend=function(s,t){t.data=l;if(o){o.call(this,s,t)}};return h.ajax(n)}function G(ao){var D=P[0],E,l,s,aq,o,B,x,z,y,n,ar,u;var A=!!h.fn.prop;var al=h.Deferred();if(ao){for(l=0;l<M.length;l++){E=h(M[l]);if(A){E.prop("disabled",false)}else{E.removeAttr("disabled")}}}s=h.extend(true,{},h.ajaxSettings,T);s.context=s.context||s;o="jqFormIO"+(new Date().getTime());if(s.iframeTarget){B=h(s.iframeTarget);n=B.attr("name");if(!n){B.attr("name",o)}else{o=n}}else{B=h('<iframe name="'+o+'" src="'+s.iframeSrc+'" />');B.css({position:"absolute",top:"-1000px",left:"-1000px"})}x=B[0];z={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(X){var W=(X==="timeout"?"timeout":"aborted");i("aborting upload... "+W);this.aborted=1;try{if(x.contentWindow.document.execCommand){x.contentWindow.document.execCommand("Stop")}}catch(Y){}B.attr("src",s.iframeSrc);z.error=W;if(s.error){s.error.call(s.context,z,W,X)}if(aq){h.event.trigger("ajaxError",[z,s,W])}if(s.complete){s.complete.call(s.context,z,W)}}};aq=s.global;if(aq&&0===h.active++){h.event.trigger("ajaxStart")}if(aq){h.event.trigger("ajaxSend",[z,s])}if(s.beforeSend&&s.beforeSend.call(s.context,z,s)===false){if(s.global){h.active--}al.reject();return al}if(z.aborted){al.reject();return al}y=D.clk;if(y){n=y.name;if(n&&!y.disabled){s.extraData=s.extraData||{};s.extraData[n]=y.value;if(y.type=="image"){s.extraData[n+".x"]=D.clk_x;s.extraData[n+".y"]=D.clk_y}}}var t=1;var w=2;function v(W){var X=W.contentWindow?W.contentWindow.document:W.contentDocument?W.contentDocument:W.document;return X}var ah=h("meta[name=csrf-token]").attr("content");var ai=h("meta[name=csrf-param]").attr("content");if(ai&&ah){s.extraData=s.extraData||{};s.extraData[ai]=ah}function m(){var ab=P.attr("target"),X=P.attr("action");D.setAttribute("target",o);if(!U){D.setAttribute("method","POST")}if(X!=s.url){D.setAttribute("action",s.url)}if(!s.skipEncodingOverride&&(!U||/post/i.test(U))){P.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(s.timeout){u=setTimeout(function(){ar=true;p(t)},s.timeout)}function aa(){try{var ad=v(x).readyState;i("state = "+ad);if(ad&&ad.toLowerCase()=="uninitialized"){setTimeout(aa,50)}}catch(ac){i("Server abort: ",ac," (",ac.name,")");p(w);if(u){clearTimeout(u)}u=undefined}}var W=[];try{if(s.extraData){for(var Y in s.extraData){if(s.extraData.hasOwnProperty(Y)){if(h.isPlainObject(s.extraData[Y])&&s.extraData[Y].hasOwnProperty("name")&&s.extraData[Y].hasOwnProperty("value")){W.push(h('<input type="hidden" name="'+s.extraData[Y].name+'">').val(s.extraData[Y].value).appendTo(D)[0])}else{W.push(h('<input type="hidden" name="'+Y+'">').val(s.extraData[Y]).appendTo(D)[0])}}}}if(!s.iframeTarget){B.appendTo("body");if(x.attachEvent){x.attachEvent("onload",p)}else{x.addEventListener("load",p,false)}}setTimeout(aa,15);var Z=document.createElement("form").submit;Z.apply(D)}finally{D.setAttribute("action",X);if(ab){D.setAttribute("target",ab)}else{P.removeAttr("target")}h(W).remove()}}if(s.forceSync){m()}else{setTimeout(m,10)}var an,am,ap=50,C;function p(ab){if(z.aborted||C){return}try{am=v(x)}catch(Y){i("cannot access response document: ",Y);ab=w}if(ab===t&&z){z.abort("timeout");al.reject(z,"timeout");return}else{if(ab==w&&z){z.abort("server abort");al.reject(z,"error","server abort");return}}if(!am||am.location.href==s.iframeSrc){if(!ar){return}}if(x.detachEvent){x.detachEvent("onload",p)}else{x.removeEventListener("load",p,false)}var ad="success",Z;try{if(ar){throw"timeout"}var ae=s.dataType=="xml"||am.XMLDocument||h.isXMLDoc(am);i("isXml="+ae);if(!ae&&window.opera&&(am.body===null||!am.body.innerHTML)){if(--ap){i("requeing onLoad callback, DOM not available");setTimeout(p,250);return}}var X=am.body?am.body:am.documentElement;z.responseText=X?X.innerHTML:null;z.responseXML=am.XMLDocument?am.XMLDocument:am;if(ae){s.dataType="xml"}z.getResponseHeader=function(aw){var av={"content-type":s.dataType};return av[aw]};if(X){z.status=Number(X.getAttribute("status"))||z.status;z.statusText=X.getAttribute("statusText")||z.statusText}var ag=(s.dataType||"").toLowerCase();var aa=/(json|script|text)/.test(ag);if(aa||s.textarea){var ac=am.getElementsByTagName("textarea")[0];if(ac){z.responseText=ac.value;z.status=Number(ac.getAttribute("status"))||z.status;z.statusText=ac.getAttribute("statusText")||z.statusText}else{if(aa){var af=am.getElementsByTagName("pre")[0];var W=am.getElementsByTagName("body")[0];if(af){z.responseText=af.textContent?af.textContent:af.innerText}else{if(W){z.responseText=W.textContent?W.textContent:W.innerText}}}}}else{if(ag=="xml"&&!z.responseXML&&z.responseText){z.responseXML=r(z.responseText)}}try{an=ak(z,ag,s)}catch(ab){ad="parsererror";z.error=Z=(ab||ad)}}catch(ab){i("error caught: ",ab);ad="error";z.error=Z=(ab||ad)}if(z.aborted){i("upload aborted");ad=null}if(z.status){ad=(z.status>=200&&z.status<300||z.status===304)?"success":"error"}if(ad==="success"){if(s.success){s.success.call(s.context,an,"success",z)}al.resolve(z.responseText,"success",z);if(aq){h.event.trigger("ajaxSuccess",[z,s])}}else{if(ad){if(Z===undefined){Z=z.statusText}if(s.error){s.error.call(s.context,z,ad,Z)}al.reject(z,"error",Z);if(aq){h.event.trigger("ajaxError",[z,s,Z])}}}if(aq){h.event.trigger("ajaxComplete",[z,s])}if(aq&&!--h.active){h.event.trigger("ajaxStop")}if(s.complete){s.complete.call(s.context,z,ad)}C=true;if(s.timeout){clearTimeout(u)}setTimeout(function(){if(!s.iframeTarget){B.remove()}z.responseXML=null},100)}var r=h.parseXML||function(X,W){if(window.ActiveXObject){W=new ActiveXObject("Microsoft.XMLDOM");W.async="false";W.loadXML(X)}else{W=(new DOMParser()).parseFromString(X,"text/xml")}return(W&&W.documentElement&&W.documentElement.nodeName!="parsererror")?W:null};var aj=h.parseJSON||function(W){return window["eval"]("("+W+")")};var ak=function(Y,aa,ab){var W=Y.getResponseHeader("content-type")||"",X=aa==="xml"||!aa&&W.indexOf("xml")>=0,Z=X?Y.responseXML:Y.responseText;if(X&&Z.documentElement.nodeName==="parsererror"){if(h.error){h.error("parsererror")}}if(ab&&ab.dataFilter){Z=ab.dataFilter(Z,aa)}if(typeof Z==="string"){if(aa==="json"||!aa&&W.indexOf("json")>=0){Z=aj(Z)}else{if(aa==="script"||!aa&&W.indexOf("javascript")>=0){h.globalEval(Z)}}}return Z};return al}};h.fn.ajaxForm=function(b){b=b||{};b.delegation=b.delegation&&h.isFunction(h.fn.on);if(!b.delegation&&this.length===0){var a={s:this.selector,c:this.context};if(!h.isReady&&a.s){i("DOM not ready, queuing ajaxForm");h(function(){h(a.s,a.c).ajaxForm(b)});return this}i("terminating; zero elements found by selector"+(h.isReady?"":" (DOM not ready)"));return this}if(b.delegation){h(document).off("submit.form-plugin",this.selector,f).off("click.form-plugin",this.selector,g).on("submit.form-plugin",this.selector,b,f).on("click.form-plugin",this.selector,b,g);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",b,f).bind("click.form-plugin",b,g)};function f(a){var b=a.data;if(!a.isDefaultPrevented()){a.preventDefault();h(this).ajaxSubmit(b)}}function g(b){var c=b.target;var e=h(c);if(!(e.is("[type=submit],[type=image]"))){var l=e.closest("[type=submit]");if(l.length===0){return}c=l[0]}var d=this;d.clk=c;if(c.type=="image"){if(b.offsetX!==undefined){d.clk_x=b.offsetX;d.clk_y=b.offsetY}else{if(typeof h.fn.offset=="function"){var a=e.offset();d.clk_x=b.pageX-a.left;d.clk_y=b.pageY-a.top}else{d.clk_x=b.pageX-c.offsetLeft;d.clk_y=b.pageY-c.offsetTop}}}setTimeout(function(){d.clk=d.clk_x=d.clk_y=null},100)}h.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};h.fn.formToArray=function(C,A){var D=[];if(this.length===0){return D}var v=this[0];var d=C?v.getElementsByTagName("*"):v.elements;if(!d){return D}var b,c,e,B,n,F,y;for(b=0,F=d.length;b<F;b++){n=d[b];e=n.name;if(!e){continue}if(C&&v.clk&&n.type=="image"){if(!n.disabled&&v.clk==n){D.push({name:e,value:h(n).val(),type:n.type});D.push({name:e+".x",value:v.clk_x},{name:e+".y",value:v.clk_y})}continue}B=h.fieldValue(n,true);if(B&&B.constructor==Array){if(A){A.push(n)}for(c=0,y=B.length;c<y;c++){D.push({name:e,value:B[c]})}}else{if(j.fileapi&&n.type=="file"&&!n.disabled){if(A){A.push(n)}var z=n.files;if(z.length){for(c=0;c<z.length;c++){D.push({name:e,value:z[c],type:n.type})}}else{D.push({name:e,value:"",type:n.type})}}else{if(B!==null&&typeof B!="undefined"){if(A){A.push(n)}D.push({name:e,value:B,type:n.type,required:n.required})}}}}if(!C&&v.clk){var a=h(v.clk),E=a[0];e=E.name;if(e&&!E.disabled&&E.type=="image"){D.push({name:e,value:a.val()});D.push({name:e+".x",value:v.clk_x},{name:e+".y",value:v.clk_y})}}return D};h.fn.formSerialize=function(a){return h.param(this.formToArray(a))};h.fn.fieldSerialize=function(a){var b=[];this.each(function(){var c=this.name;if(!c){return}var e=h.fieldValue(this,a);if(e&&e.constructor==Array){for(var d=0,m=e.length;d<m;d++){b.push({name:c,value:e[d]})}}else{if(e!==null&&typeof e!="undefined"){b.push({name:this.name,value:e})}}});return h.param(b)};h.fn.fieldValue=function(a){for(var b=[],d=0,m=this.length;d<m;d++){var c=this[d];var e=h.fieldValue(c,a);if(e===null||typeof e=="undefined"||(e.constructor==Array&&!e.length)){continue}if(e.constructor==Array){h.merge(b,e)}else{b.push(e)}}return b};h.fieldValue=function(y,e){var w=y.name,A=y.type,z=y.tagName.toLowerCase();if(e===undefined){e=true}if(e&&(!w||y.disabled||A=="reset"||A=="button"||(A=="checkbox"||A=="radio")&&!y.checked||(A=="submit"||A=="image")&&y.form&&y.form.clk!=y||z=="select"&&y.selectedIndex==-1)){return null}if(z=="select"){var d=y.selectedIndex;if(d<0){return null}var b=[],x=y.options;var t=(A=="select-one");var c=(t?d+1:x.length);for(var v=(t?d:0);v<c;v++){var n=x[v];if(n.selected){var a=n.value;if(!a){a=(n.attributes&&n.attributes.value&&!(n.attributes.value.specified))?n.text:n.value}if(t){return a}b.push(a)}}return b}return h(y).val()};h.fn.clearForm=function(a){return this.each(function(){h("input,select,textarea",this).clearFields(a)})};h.fn.clearFields=h.fn.clearInputs=function(b){var a=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var c=this.type,d=this.tagName.toLowerCase();if(a.test(c)||d=="textarea"){this.value=""}else{if(c=="checkbox"||c=="radio"){this.checked=false}else{if(d=="select"){this.selectedIndex=-1}else{if(c=="file"){if(/MSIE/.test(navigator.userAgent)){h(this).replaceWith(h(this).clone())}else{h(this).val("")}}else{if(b){if((b===true&&/hidden/.test(c))||(typeof b=="string"&&h(this).is(b))){this.value=""}}}}}}})};h.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};h.fn.enable=function(a){if(a===undefined){a=true}return this.each(function(){this.disabled=!a})};h.fn.selected=function(a){if(a===undefined){a=true}return this.each(function(){var c=this.type;if(c=="checkbox"||c=="radio"){this.checked=a}else{if(this.tagName.toLowerCase()=="option"){var b=h(this).parent("select");if(a&&b[0]&&b[0].type=="select-one"){b.find("option").selected(false)}this.selected=a}}})};h.fn.ajaxSubmit.debug=false;function i(){if(!h.fn.ajaxSubmit.debug){return}var a="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(a)}else{if(window.opera&&window.opera.postError){window.opera.postError(a)}}}})(jQuery);