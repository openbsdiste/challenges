"use strict";(function(){if(jQuery&&jQuery.jstree){return}var f=false,d=false,e=false;(function(b){b.vakata={};b.vakata.css={get_css:function(q,o,h){q=q.toLowerCase();var g=h.cssRules||h.rules,p=0;do{if(g.length&&p>g.length+5){return false}if(g[p].selectorText&&g[p].selectorText.toLowerCase()==q){if(o===true){if(h.removeRule){h.removeRule(p)}if(h.deleteRule){h.deleteRule(p)}return true}else{return g[p]}}}while(g[++p]);return false},add_css:function(g,h){if(b.jstree.css.get_css(g,false,h)){return false}if(h.insertRule){h.insertRule(g+" { }",0)}else{h.addRule(g,null,0)}return b.vakata.css.get_css(g)},remove_css:function(g,h){return b.vakata.css.get_css(g,true,h)},add_sheet:function(m){var n=false,g=true;if(m.str){if(m.title){n=b("style[id='"+m.title+"-stylesheet']")[0]}if(n){g=false}else{n=document.createElement("style");n.setAttribute("type","text/css");if(m.title){n.setAttribute("id",m.title+"-stylesheet")}}if(n.styleSheet){if(g){document.getElementsByTagName("head")[0].appendChild(n);n.styleSheet.cssText=m.str}else{n.styleSheet.cssText=n.styleSheet.cssText+" "+m.str}}else{n.appendChild(document.createTextNode(m.str));document.getElementsByTagName("head")[0].appendChild(n)}return n.sheet||n.styleSheet}if(m.url){if(document.createStyleSheet){try{n=document.createStyleSheet(m.url)}catch(h){}}else{n=document.createElement("link");n.rel="stylesheet";n.type="text/css";n.media="all";n.href=m.url;document.getElementsByTagName("head")[0].appendChild(n);return n.styleSheet}}}};var a=[],c=-1,i={},j={};b.fn.jstree=function(g){var n=(typeof g=="string"),m=Array.prototype.slice.call(arguments,1),h=this;if(n){if(g.substring(0,1)=="_"){return h}this.each(function(){var k=a[b.data(this,"jstree_instance_id")],l=(k&&b.isFunction(k[g]))?k[g].apply(k,m):k;if(typeof l!=="undefined"&&(g.indexOf("is_")===0||(l!==true&&l!==false))){h=l;return false}})}else{this.each(function(){var s=b.data(this,"jstree_instance_id"),v=[],k=g?b.extend({},true,g):{},l=b(this),t=false,u=[];v=v.concat(m);if(l.data("jstree")){v.push(l.data("jstree"))}k=v.length?b.extend.apply(null,[true,k].concat(v)):k;if(typeof s!=="undefined"&&a[s]){a[s].destroy()}s=parseInt(a.push({}),10)-1;b.data(this,"jstree_instance_id",s);k.plugins=b.isArray(k.plugins)?k.plugins:b.jstree.defaults.plugins.slice();k.plugins.unshift("core");k.plugins=k.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");t=b.extend(true,{},b.jstree.defaults,k);t.plugins=k.plugins;b.each(i,function(p,o){if(b.inArray(p,t.plugins)===-1){t[p]=null;delete t[p]}else{u.push(p)}});t.plugins=u;a[s]=new b.jstree._instance(s,b(this).addClass("jstree jstree-"+s),t);b.each(a[s]._get_settings().plugins,function(p,o){a[s].data[o]={}});b.each(a[s]._get_settings().plugins,function(p,o){if(i[o]){i[o].__init.apply(a[s])}});setTimeout(function(){if(a[s]){a[s].init()}},0)})}return h};b.jstree={defaults:{plugins:[]},_focused:function(){return a[c]||null},_reference:function(h){if(a[h]){return a[h]}var g=b(h);if(!g.length&&typeof h==="string"){g=b("#"+h)}if(!g.length){return null}return a[g.closest(".jstree").data("jstree_instance_id")]||null},_instance:function(h,l,g){this.data={core:{}};this.get_settings=function(){return b.extend(true,{},g)};this._get_settings=function(){return g};this.get_index=function(){return h};this.get_container=function(){return l};this.get_container_ul=function(){return l.children("ul:eq(0)")};this._set_settings=function(k){g=b.extend(true,{},g,k)}},_fn:{},plugin:function(h,g){g=b.extend({},{__init:b.noop,__destroy:b.noop,_fn:{},defaults:false},g);i[h]=g;b.jstree.defaults[h]=g.defaults;b.each(g._fn,function(n,m){m.plugin=h;m.old=b.jstree._fn[n];b.jstree._fn[n]=function(){var k,s=m,t=Array.prototype.slice.call(arguments),l=new b.Event("before.jstree"),r=false;if(this.data.core.locked===true&&n!=="unlock"&&n!=="is_locked"){return}do{if(s&&s.plugin&&b.inArray(s.plugin,this._get_settings().plugins)!==-1){break}s=s.old}while(s);if(!s){return}if(n.indexOf("_")===0){k=s.apply(this,t)}else{k=this.get_container().triggerHandler(l,{func:n,inst:this,args:t,plugin:s.plugin});if(k===false){return}if(typeof k!=="undefined"){t=k}k=s.apply(b.extend({},this,{__callback:function(o){this.get_container().triggerHandler(n+".jstree",{inst:this,args:t,rslt:o,rlbk:r})},__rollback:function(){r=this.get_rollback();return r},__call_old:function(o){return s.old.apply(this,(o?Array.prototype.slice.call(arguments,1):t))}}),t)}return k};b.jstree._fn[n].old=m.old;b.jstree._fn[n].plugin=h})},rollback:function(g){if(g){if(!b.isArray(g)){g=[g]}b.each(g,function(l,h){a[h.i].set_rollback(h.h,h.d)})}}};b.jstree._fn=b.jstree._instance.prototype={};b(function(){var h=navigator.userAgent.toLowerCase(),m=(h.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],n=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";if(/msie/.test(h)&&parseInt(m,10)==6){f=true;try{document.execCommand("BackgroundImageCache",false,true)}catch(g){}n+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}if(/msie/.test(h)&&parseInt(m,10)==7){d=true;n+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "}if(!/compatible/.test(h)&&/mozilla/.test(h)&&parseFloat(m,10)<1.9){e=true;n+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } "}b.vakata.css.add_sheet({str:n,title:"jstree"})});b.jstree.plugin("core",{__init:function(){this.data.core.locked=false;this.data.core.to_open=this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:false,animation:500,initially_open:[],initially_load:[],open_parents:true,notify_plugins:true,rtl:false,load_open:false,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();if(this._get_settings().core.rtl){this.get_container().addClass("jstree-rtl").css("direction","rtl")}this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",b.proxy(function(g){var h=b(g.target);this.toggle_node(h)},this)).bind("mousedown.jstree",b.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(h){var g;if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){g=window.getSelection();try{g.removeAllRanges();g.collapse()}catch(l){}}}});if(this._get_settings().core.notify_plugins){this.get_container().bind("load_node.jstree",b.proxy(function(h,m){var g=this._get_node(m.rslt.obj),n=this;if(g===-1){g=this.get_container_ul()}if(!g.length){return}g.find("li").each(function(){var k=b(this);if(k.data("jstree")){b.each(k.data("jstree"),function(l,p){if(n.data[l]&&b.isFunction(n["_"+l+"_notify"])){n["_"+l+"_notify"].call(n,k,p)}})}})},this))}if(this._get_settings().core.load_open){this.get_container().bind("load_node.jstree",b.proxy(function(h,m){var g=this._get_node(m.rslt.obj),n=this;if(g===-1){g=this.get_container_ul()}if(!g.length){return}g.find("li.jstree-open:not(:has(ul))").each(function(){n.load_node(this,b.noop,b.noop)})},this))}this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var o,g=this.get_index(),n=this._get_settings(),h=this;b.each(n.plugins,function(m,k){try{i[k].__destroy.apply(h)}catch(l){}});this.__callback();if(this.is_focused()){for(o in a){if(a.hasOwnProperty(o)&&o!=g){a[o].set_focus();break}}}if(g===c){c=-1}this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});b(document).unbind(".jstree-"+g).undelegate(".jstree-"+g);a[g]=null;delete a[g]},_core_notify:function(g,h){if(h.opened){this.open_node(g,false,true)}},lock:function(){this.data.core.locked=true;this.get_container().children("ul").addClass("jstree-locked").css("opacity","0.7");this.__callback({})},unlock:function(){this.data.core.locked=false;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var g=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){if(this.id){g.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}});this.__callback(g.data.core.to_open)},save_loaded:function(){},reload_nodes:function(o){var g=this,p=true,h=[],n=[];if(!o){this.data.core.reopen=false;this.data.core.refreshing=true;this.data.core.to_open=b.map(b.makeArray(this.data.core.to_open),function(k){return"#"+k.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.data.core.to_load=b.map(b.makeArray(this.data.core.to_load),function(k){return"#"+k.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});if(this.data.core.to_open.length){this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)}}if(this.data.core.to_load.length){b.each(this.data.core.to_load,function(l,k){if(k=="#"){return true}if(b(k).length){h.push(k)}else{n.push(k)}});if(h.length){this.data.core.to_load=n;b.each(h,function(l,k){if(!g._is_loaded(k)){g.load_node(k,function(){g.reload_nodes(true)},function(){g.reload_nodes(true)});p=false}})}}if(this.data.core.to_open.length){b.each(this.data.core.to_open,function(l,k){g.open_node(k,false,true)})}if(p){if(this.data.core.reopen){clearTimeout(this.data.core.reopen)}this.data.core.reopen=setTimeout(function(){g.__callback({},g)},50);this.data.core.refreshing=false;this.reopen()}},reopen:function(){var g=this;if(this.data.core.to_open.length){b.each(this.data.core.to_open,function(l,h){g.open_node(h,false,true)})}this.__callback({})},refresh:function(h){var g=this;this.save_opened();if(!h){h=-1}h=this._get_node(h);if(!h){h=-1}if(h!==-1){h.children("UL").remove()}else{this.get_container_ul().empty()}this.load_node(h,function(){g.__callback({obj:h});g.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(this.is_focused()){return}var g=b.jstree._focused();if(g){g.unset_focus()}this.get_container().addClass("jstree-focused");c=this.get_index();this.__callback()},is_focused:function(){return c==this.get_index()},unset_focus:function(){if(this.is_focused()){this.get_container().removeClass("jstree-focused");c=-1}this.__callback()},_get_node:function(h){var g=b(h,this.get_container());if(g.is(".jstree")||h==-1){return -1}g=g.closest("li",this.get_container());return g.length?g:false},_get_next:function(g,h){g=this._get_node(g);if(g===-1){return this.get_container().find("> ul > li:first-child")}if(!g.length){return false}if(h){return(g.nextAll("li").size()>0)?g.nextAll("li:eq(0)"):false}if(g.hasClass("jstree-open")){return g.find("li:eq(0)")}else{if(g.nextAll("li").size()>0){return g.nextAll("li:eq(0)")}else{return g.parentsUntil(".jstree","li").next("li").eq(0)}}},_get_prev:function(h,l){h=this._get_node(h);if(h===-1){return this.get_container().find("> ul > li:last-child")}if(!h.length){return false}if(l){return(h.prevAll("li").length>0)?h.prevAll("li:eq(0)"):false}if(h.prev("li").length){h=h.prev("li").eq(0);while(h.hasClass("jstree-open")){h=h.children("ul:eq(0)").children("li:last")}return h}else{var g=h.parentsUntil(".jstree","li:eq(0)");return g.length?g:false}},_get_parent:function(h){h=this._get_node(h);if(h==-1||!h.length){return false}var g=h.parentsUntil(".jstree","li:eq(0)");return g.length?g:-1},_get_children:function(g){g=this._get_node(g);if(g===-1){return this.get_container().children("ul:eq(0)").children("li")}if(!g.length){return false}return g.children("ul:eq(0)").children("li")},get_path:function(h,n){var m=[],g=this;h=this._get_node(h);if(h===-1||!h||!h.length){return false}h.parentsUntil(".jstree","li").each(function(){m.push(n?this.id:g.get_text(this))});m.reverse();m.push(n?h.attr("id"):this.get_text(h));return m},_get_string:function(g){return this._get_settings().core.strings[g]||g},is_open:function(g){g=this._get_node(g);return g&&g!==-1&&g.hasClass("jstree-open")},is_closed:function(g){g=this._get_node(g);return g&&g!==-1&&g.hasClass("jstree-closed")},is_leaf:function(g){g=this._get_node(g);return g&&g!==-1&&g.hasClass("jstree-leaf")},correct_state:function(g){g=this._get_node(g);if(!g||g===-1){return false}g.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:g})},open_node:function(h,g,o){h=this._get_node(h);if(!h.length){return false}if(!h.hasClass("jstree-closed")){if(g){g.call()}return false}var n=o||f?0:this._get_settings().core.animation,p=this;if(!this._is_loaded(h)){h.children("a").addClass("jstree-loading");this.load_node(h,function(){p.open_node(h,g,o)},g)}else{if(this._get_settings().core.open_parents){h.parentsUntil(".jstree",".jstree-closed").each(function(){p.open_node(this,false,true)})}if(n){h.children("ul").css("display","none")}h.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading");if(n){h.children("ul").stop(true,true).slideDown(n,function(){this.style.display="";p.after_open(h)})}else{p.after_open(h)}this.__callback({obj:h});if(g){g.call()}}},after_open:function(g){this.__callback({obj:g})},close_node:function(g,m){g=this._get_node(g);var h=m||f?0:this._get_settings().core.animation,n=this;if(!g.length||!g.hasClass("jstree-open")){return false}if(h){g.children("ul").attr("style","display:block !important")}g.removeClass("jstree-open").addClass("jstree-closed");if(h){g.children("ul").stop(true,true).slideUp(h,function(){this.style.display="";n.after_close(g)})}else{n.after_close(g)}this.__callback({obj:g})},after_close:function(g){this.__callback({obj:g})},toggle_node:function(g){g=this._get_node(g);if(g.hasClass("jstree-closed")){return this.open_node(g)}if(g.hasClass("jstree-open")){return this.close_node(g)}},open_all:function(h,m,n){h=h?this._get_node(h):-1;if(!h||h===-1){h=this.get_container_ul()}if(n){h=h.find("li.jstree-closed")}else{n=h;if(h.is(".jstree-closed")){h=h.find("li.jstree-closed").andSelf()}else{h=h.find("li.jstree-closed")}}var g=this;h.each(function(){var k=this;if(!g._is_loaded(this)){g.open_node(this,function(){g.open_all(k,m,n)},!m)}else{g.open_node(this,false,!m)}});if(n.find("li.jstree-closed").length===0){this.__callback({obj:n})}},close_all:function(h,l){var g=this;h=h?this._get_node(h):this.get_container();if(!h||h===-1){h=this.get_container_ul()}h.find("li.jstree-open").andSelf().each(function(){g.close_node(this,!l)});this.__callback({obj:h})},clean_node:function(g){g=g&&g!=-1?b(g):this.get_container_ul();g=g.is("li")?g.find("li").andSelf():g.find("li");g.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");g.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:g})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(true),d:this.data}},set_rollback:function(h,g){this.get_container().empty().append(h);this.data=g;this.__callback()},load_node:function(g,l,h){this.__callback({obj:g})},_is_loaded:function(g){return true},create_node:function(v,s,g,t,r){v=this._get_node(v);s=typeof s==="undefined"?"last":s;var u=b("<li />"),h=this._get_settings().core,q;if(v!==-1&&!v.length){return false}if(!r&&!this._is_loaded(v)){this.load_node(v,function(){this.create_node(v,s,g,t,true)});return false}this.__rollback();if(typeof g==="string"){g={data:g}}if(!g){g={}}if(g.attr){u.attr(g.attr)}if(g.metadata){u.data(g.metadata)}if(g.state){u.addClass("jstree-"+g.state)}if(!g.data){g.data=this._get_string("new_node")}if(!b.isArray(g.data)){q=g.data;g.data=[];g.data.push(q)}b.each(g.data,function(k,l){q=b("<a />");if(b.isFunction(l)){l=l.call(this,g)}if(typeof l=="string"){q.attr("href","#")[h.html_titles?"html":"text"](l)}else{if(!l.attr){l.attr={}}if(!l.attr.href){l.attr.href="#"}q.attr(l.attr)[h.html_titles?"html":"text"](l.title);if(l.language){q.addClass(l.language)}}q.prepend("<ins class='jstree-icon'>&#160;</ins>");if(!l.icon&&g.icon){l.icon=g.icon}if(l.icon){if(l.icon.indexOf("/")===-1){q.children("ins").addClass(l.icon)}else{q.children("ins").css("background","url('"+l.icon+"') center center no-repeat")}}u.append(q)});u.prepend("<ins class='jstree-icon'>&#160;</ins>");if(v===-1){v=this.get_container();if(s==="before"){s="first"}if(s==="after"){s="last"}}switch(s){case"before":v.before(u);q=this._get_parent(v);break;case"after":v.after(u);q=this._get_parent(v);break;case"inside":case"first":if(!v.children("ul").length){v.append("<ul />")}v.children("ul").prepend(u);q=v;break;case"last":if(!v.children("ul").length){v.append("<ul />")}v.children("ul").append(u);q=v;break;default:if(!v.children("ul").length){v.append("<ul />")}if(!s){s=0}q=v.children("ul").children("li").eq(s);if(q.length){q.before(u)}else{v.children("ul").append(u)}q=v;break}if(q===-1||q.get(0)===this.get_container().get(0)){q=-1}this.clean_node(q);this.__callback({obj:u,parent:q});if(t){t.call(this,u)}return u},get_text:function(g){g=this._get_node(g);if(!g.length){return false}var h=this._get_settings().core.html_titles;g=g.children("a:eq(0)");if(h){g=g.clone();g.children("INS").remove();return g.html()}else{g=g.contents().filter(function(){return this.nodeType==3})[0];return g.nodeValue}},set_text:function(h,g){h=this._get_node(h);if(!h.length){return false}h=h.children("a:eq(0)");if(this._get_settings().core.html_titles){var l=h.children("INS").clone();h.html(g).prepend(l);this.__callback({obj:h,name:g});return true}else{h=h.contents().filter(function(){return this.nodeType==3})[0];this.__callback({obj:h,name:g});return(h.nodeValue=g)}},rename_node:function(h,g){h=this._get_node(h);this.__rollback();if(h&&h.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))){this.__callback({obj:h,name:g})}},delete_node:function(g){g=this._get_node(g);if(!g.length){return false}this.__rollback();var h=this._get_parent(g),m=b([]),n=this;g.each(function(){m=m.add(n._get_prev(this))});g=g.detach();if(h!==-1&&h.find("> ul > li").length===0){h.removeClass("jstree-open jstree-closed").addClass("jstree-leaf")}this.clean_node(h);this.__callback({obj:g,prev:m,parent:h});return g},prepare_move:function(g,o,r,q,p){var h={};h.ot=b.jstree._reference(g)||this;h.o=h.ot._get_node(g);h.r=o===-1?-1:this._get_node(o);h.p=(typeof r==="undefined"||r===false)?"last":r;if(!p&&j.o&&j.o[0]===h.o[0]&&j.r[0]===h.r[0]&&j.p===h.p){this.__callback(j);if(q){q.call(this,j)}return}h.ot=b.jstree._reference(h.o)||this;h.rt=b.jstree._reference(h.r)||this;if(h.r===-1||!h.r){h.cr=-1;switch(h.p){case"first":case"before":case"inside":h.cp=0;break;case"after":case"last":h.cp=h.rt.get_container().find(" > ul > li").length;break;default:h.cp=h.p;break}}else{if(!/^(before|after)$/.test(h.p)&&!this._is_loaded(h.r)){return this.load_node(h.r,function(){this.prepare_move(g,o,r,q,true)})}switch(h.p){case"before":h.cp=h.r.index();h.cr=h.rt._get_parent(h.r);break;case"after":h.cp=h.r.index()+1;h.cr=h.rt._get_parent(h.r);break;case"inside":case"first":h.cp=0;h.cr=h.r;break;case"last":h.cp=h.r.find(" > ul > li").length;h.cr=h.r;break;default:h.cp=h.p;h.cr=h.r;break}}h.np=h.cr==-1?h.rt.get_container():h.cr;h.op=h.ot._get_parent(h.o);h.cop=h.o.index();if(h.op===-1){h.op=h.ot?h.ot.get_container():this.get_container()}if(!/^(before|after)$/.test(h.p)&&h.op&&h.np&&h.op[0]===h.np[0]&&h.o.index()<h.cp){h.cp++}h.or=h.np.find(" > ul > li:nth-child("+(h.cp+1)+")");j=h;this.__callback(j);if(q){q.call(this,j)}},check_move:function(){var g=j,l=true,h=g.r===-1?this.get_container():g.r;if(!g||!g.o||g.or[0]===g.o[0]){return false}if(g.op&&g.np&&g.op[0]===g.np[0]&&g.cp-1===g.o.index()){return false}g.o.each(function(){if(h.parentsUntil(".jstree","li").andSelf().index(this)!==-1){l=false;return false}});return l},move_node:function(u,h,s,o,r,v){if(!r){return this.prepare_move(u,h,s,function(k){this.move_node(k,false,false,o,true,v)})}if(o){j.cy=true}if(!v&&!this.check_move()){return false}this.__rollback();var t=false;if(o){t=u.o.clone(true);t.find("*[id]").andSelf().each(function(){if(this.id){this.id="copy_"+this.id}})}else{t=u.o}if(u.or.length){u.or.before(t)}else{if(!u.np.children("ul").length){b("<ul />").appendTo(u.np)}u.np.children("ul:eq(0)").append(t)}try{u.ot.clean_node(u.op);u.rt.clean_node(u.np);if(!u.op.find("> ul > li").length){u.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}}catch(g){}if(o){j.cy=true;j.oc=t}this.__callback(j);return j},_get_move:function(){return j}}})})(jQuery);(function(h){var a,b,c;h(function(){if(/msie/.test(navigator.userAgent.toLowerCase())){b=h('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1000,left:0}).appendTo("body");c=h('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1000,left:0}).appendTo("body");a=b.width()-c.width();b.add(c).remove()}else{b=h("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1000,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200});a=100-b.width();b.parent().remove()}});h.jstree.plugin("ui",{__init:function(){this.data.ui.selected=h();this.data.ui.last_selected=false;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",h.proxy(function(g){g.preventDefault();g.currentTarget.blur();if(!h(g.currentTarget).hasClass("jstree-loading")){this.select_node(g.currentTarget,true,g)}},this)).delegate("a","mouseenter.jstree",h.proxy(function(g){if(!h(g.currentTarget).hasClass("jstree-loading")){this.hover_node(g.target)}},this)).delegate("a","mouseleave.jstree",h.proxy(function(g){if(!h(g.currentTarget).hasClass("jstree-loading")){this.dehover_node(g.target)}},this)).bind("reopen.jstree",h.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",h.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",h.proxy(function(){this.reselect()},this)).bind("close_node.jstree",h.proxy(function(q,p){var r=this._get_settings().ui,o=this._get_node(p.rslt.obj),n=(o&&o.length)?o.children("ul").find("a.jstree-clicked"):h(),g=this;if(r.selected_parent_close===false||!n.length){return}n.each(function(){g.deselect_node(this);if(r.selected_parent_close==="select_parent"){g.select_node(o)}})},this)).bind("delete_node.jstree",h.proxy(function(q,p){var r=this._get_settings().ui.select_prev_on_delete,o=this._get_node(p.rslt.obj),n=(o&&o.length)?o.find("a.jstree-clicked"):[],g=this;n.each(function(){g.deselect_node(this)});if(r&&n.length){p.rslt.prev.each(function(){if(this.parentNode){g.select_node(this);return false}})}},this)).bind("move_node.jstree",h.proxy(function(j,g){if(g.rslt.cy){g.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")}},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:true,select_prev_on_delete:true,disable_selecting_children:false,initially_select:[]},_fn:{_get_node:function(l,k){if(typeof l==="undefined"||l===null){return k?this.data.ui.selected:this.data.ui.last_selected}var g=h(l,this.get_container());if(g.is(".jstree")||l==-1){return -1}g=g.closest("li",this.get_container());return g.length?g:false},_ui_notify:function(g,j){if(j.selected){this.select_node(g,false)}},save_selected:function(){var g=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){if(this.id){g.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}});this.__callback(this.data.ui.to_select)},reselect:function(){var g=this,j=this.data.ui.to_select;j=h.map(h.makeArray(j),function(i){return"#"+i.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});h.each(j,function(l,i){if(i&&i!=="#"){g.select_node(i)}});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});this.__callback()},refresh:function(g){this.save_selected();return this.__call_old()},hover_node:function(g){g=this._get_node(g);if(!g.length){return false}if(!g.hasClass("jstree-hovered")){this.dehover_node()}this.data.ui.hovered=g.children("a").addClass("jstree-hovered").parent();this._fix_scroll(g);this.__callback({obj:g})},dehover_node:function(){var g=this.data.ui.hovered,j;if(!g||!g.length){return false}j=g.children("a").removeClass("jstree-hovered").parent();if(this.data.ui.hovered[0]===j[0]){this.data.ui.hovered=null}this.__callback({obj:g})},select_node:function(u,x,t){u=this._get_node(u);if(u==-1||!u||!u.length){return false}var g=this._get_settings().ui,r=(g.select_multiple_modifier=="on"||(g.select_multiple_modifier!==false&&t&&t[g.select_multiple_modifier+"Key"])),w=(g.select_range_modifier!==false&&t&&t[g.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==u[0]&&this.data.ui.last_selected.parent()[0]===u.parent()[0]),v=this.is_selected(u),s=true,q=this;if(x){if(g.disable_selecting_children&&r&&((u.parentsUntil(".jstree","li").children("a.jstree-clicked").length)||(u.children("ul").find("a.jstree-clicked:eq(0)").length))){return false}s=false;switch(!0){case (w):this.data.ui.last_selected.addClass("jstree-last-selected");u=u[u.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf();if(g.select_limit==-1||u.length<g.select_limit){this.data.ui.last_selected.removeClass("jstree-last-selected");this.data.ui.selected.each(function(){if(this!==q.data.ui.last_selected[0]){q.deselect_node(this)}});v=false;s=true}else{s=false}break;case (v&&!r):this.deselect_all();v=false;s=true;break;case (!v&&!r):if(g.select_limit==-1||g.select_limit>0){this.deselect_all();s=true}break;case (v&&r):this.deselect_node(u);break;case (!v&&r):if(g.select_limit==-1||this.data.ui.selected.length+1<=g.select_limit){s=true}break}}if(s&&!v){if(!w){this.data.ui.last_selected=u}u.children("a").addClass("jstree-clicked");if(g.selected_parent_open){u.parents(".jstree-closed").each(function(){q.open_node(this,false,true)})}this.data.ui.selected=this.data.ui.selected.add(u);this._fix_scroll(u.eq(0));this.__callback({obj:u,e:t})}},_fix_scroll:function(k){var g=this.get_container()[0],l;if(g.scrollHeight>g.offsetHeight){k=this._get_node(k);if(!k||k===-1||!k.length||!k.is(":visible")){return}l=k.offset().top-this.get_container().offset().top;if(l<0){g.scrollTop=g.scrollTop+l-1}if(l+this.data.core.li_height+(g.scrollWidth>g.offsetWidth?a:0)>g.offsetHeight){g.scrollTop=g.scrollTop+(l-g.offsetHeight+this.data.core.li_height+1+(g.scrollWidth>g.offsetWidth?a:0))}}},deselect_node:function(g){g=this._get_node(g);if(!g.length){return false}if(this.is_selected(g)){g.children("a").removeClass("jstree-clicked");this.data.ui.selected=this.data.ui.selected.not(g);if(this.data.ui.last_selected.get(0)===g.get(0)){this.data.ui.last_selected=this.data.ui.selected.eq(0)}this.__callback({obj:g})}},toggle_select:function(g){g=this._get_node(g);if(!g.length){return false}if(this.is_selected(g)){this.deselect_node(g)}else{this.select_node(g)}},is_selected:function(g){return this.data.ui.selected.index(this._get_node(g))>=0},get_selected:function(g){return g?h(g).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(g){var j=g?h(g).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();j.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=h([]);this.data.ui.last_selected=false;this.__callback({obj:j})}}});h.jstree.defaults.plugins.push("ui")})(jQuery);(function(a){a.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",a.proxy(function(b,c){if(this._get_settings().crrm.move.open_onmove){var i=this;c.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){i.open_node(this,false,true)})}},this))},defaults:{input_width_limit:200,move:{always_copy:false,open_onmove:true,default_position:"last",check_move:function(b){return true}}},_fn:{_show_input:function(t,c){t=this._get_node(t);var o=this._get_settings().core.rtl,n=this._get_settings().crrm.input_width_limit,r=t.children("ins").width(),s=t.find("> a:visible > ins").width()*t.find("> a:visible > ins").length,b=this.get_text(t),p=a("<div />",{css:{position:"absolute",top:"-200px",left:(o?"0px":"-1000px"),visibility:"hidden"}}).appendTo("body"),q=t.css("position","relative").append(a("<input />",{value:b,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:(o?"auto":(r+s+4)+"px"),right:(o?(r+s+4)+"px":"auto"),top:"0px",height:(this.data.core.li_height-2)+"px",lineHeight:(this.data.core.li_height-2)+"px",width:"150px"},blur:a.proxy(function(){var g=t.children(".jstree-rename-input"),h=g.val();if(h===""){h=b}p.remove();g.remove();this.set_text(t,b);this.rename_node(t,h);c.call(this,t,h,b);t.css("position","")},this),keyup:function(g){var h=g.keyCode||g.which;if(h==27){this.value=b;this.blur();return}else{if(h==13){this.blur();return}else{q.width(Math.min(p.text("pW"+this.value).width(),n))}}},keypress:function(g){var h=g.keyCode||g.which;if(h==13){return false}}})).children(".jstree-rename-input");this.set_text(t,"");p.css({fontFamily:q.css("fontFamily")||"",fontSize:q.css("fontSize")||"",fontWeight:q.css("fontWeight")||"",fontStyle:q.css("fontStyle")||"",fontStretch:q.css("fontStretch")||"",fontVariant:q.css("fontVariant")||"",letterSpacing:q.css("letterSpacing")||"",wordSpacing:q.css("wordSpacing")||""});q.width(Math.min(p.text("pW"+q[0].value).width(),n))[0].select()},rename:function(b){b=this._get_node(b);this.__rollback();var c=this.__callback;this._show_input(b,function(g,j,k){c.call(this,{obj:g,new_name:j,old_name:k})})},create:function(l,o,m,b,p){var n,c=this;l=this._get_node(l);if(!l){l=-1}this.__rollback();n=this.create_node(l,o,m,function(h){var g=this._get_parent(h),i=a(h).index();if(b){b.call(this,h)}if(g.length&&g.hasClass("jstree-closed")){this.open_node(g,false,true)}if(!p){this._show_input(h,function(j,k,r){c.__callback({obj:j,name:k,parent:g,position:i})})}else{c.__callback({obj:h,name:this.get_text(h),parent:g,position:i})}});return n},remove:function(b){b=this._get_node(b,true);var c=this._get_parent(b),h=this._get_prev(b);this.__rollback();b=this.delete_node(b);if(b!==false){this.__callback({obj:b,prev:h,parent:c})}},check_move:function(){if(!this.__call_old()){return false}var b=this._get_settings().crrm.move;if(!b.check_move.call(this,this._get_move())){return false}return true},move_node:function(b,l,p,n,o,c){var m=this._get_settings().crrm.move;if(!o){if(typeof p==="undefined"){p=m.default_position}if(p==="inside"&&!m.default_position.match(/^(before|after)$/)){p=m.default_position}return this.__call_old(true,b,l,p,n,false,c)}if(m.always_copy===true||(m.always_copy==="multitree"&&b.rt.get_index()!==b.ot.get_index())){n=true}this.__call_old(true,b,l,p,n,true,c)},cut:function(b){b=this._get_node(b,true);if(!b||!b.length){return false}this.data.crrm.cp_nodes=false;this.data.crrm.ct_nodes=b;this.__callback({obj:b})},copy:function(b){b=this._get_node(b,true);if(!b||!b.length){return false}this.data.crrm.ct_nodes=false;this.data.crrm.cp_nodes=b;this.__callback({obj:b})},paste:function(b){b=this._get_node(b);if(!b||!b.length){return false}var c=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes){return false}if(this.data.crrm.ct_nodes){this.move_node(this.data.crrm.ct_nodes,b);this.data.crrm.ct_nodes=false}if(this.data.crrm.cp_nodes){this.move_node(this.data.crrm.cp_nodes,b,false,true)}this.__callback({obj:b,nodes:c})}}})})(jQuery);(function(b){var a=[];b.jstree._themes=false;b.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",b.proxy(function(){var c=this._get_settings().themes;this.data.themes.dots=c.dots;this.data.themes.icons=c.icons;this.set_theme(c.theme,c.url)},this)).bind("loaded.jstree",b.proxy(function(){if(!this.data.themes.dots){this.hide_dots()}else{this.show_dots()}if(!this.data.themes.icons){this.hide_icons()}else{this.show_icons()}},this))},defaults:{theme:"default",url:false,dots:true,icons:true},_fn:{set_theme:function(c,h){if(!c){return false}if(!h){h=b.jstree._themes+c+"/style.css"}if(b.inArray(h,a)==-1){b.vakata.css.add_sheet({url:h});a.push(h)}if(this.data.themes.theme!=c){this.get_container().removeClass("jstree-"+this.data.themes.theme);this.data.themes.theme=c}this.get_container().addClass("jstree-"+c);if(!this.data.themes.dots){this.hide_dots()}else{this.show_dots()}if(!this.data.themes.icons){this.hide_icons()}else{this.show_icons()}this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=true;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=false;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){if(this.data.themes.dots){this.hide_dots()}else{this.show_dots()}},show_icons:function(){this.data.themes.icons=true;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=false;this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){if(this.data.themes.icons){this.hide_icons()}else{this.show_icons()}}}});b(function(){if(b.jstree._themes===false){b("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/)){b.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/";return false}})}if(b.jstree._themes===false){b.jstree._themes="themes/"}});b.jstree.defaults.plugins.push("themes")})(jQuery);(function(a){var b=[];function c(m,l){var i=a.jstree._focused(),n;if(i&&i.data&&i.data.hotkeys&&i.data.hotkeys.enabled){n=i._get_settings().hotkeys[m];if(n){return n.call(i,l)}}}a.jstree.plugin("hotkeys",{__init:function(){if(typeof a.hotkeys==="undefined"){throw"jsTree hotkeys: jQuery hotkeys plugin not included."}if(!this.data.ui){throw"jsTree hotkeys: jsTree UI plugin not included."}a.each(this._get_settings().hotkeys,function(i,j){if(j!==false&&a.inArray(i,b)==-1){a(document).bind("keydown",i,function(g){return c(i,g)});b.push(i)}});this.get_container().bind("lock.jstree",a.proxy(function(){if(this.data.hotkeys.enabled){this.data.hotkeys.enabled=false;this.data.hotkeys.revert=true}},this)).bind("unlock.jstree",a.proxy(function(){if(this.data.hotkeys.revert){this.data.hotkeys.enabled=true}},this));this.enable_hotkeys()},defaults:{up:function(){var h=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_prev(h));return false},"ctrl+up":function(){var h=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_prev(h));return false},"shift+up":function(){var h=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_prev(h));return false},down:function(){var h=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_next(h));return false},"ctrl+down":function(){var h=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_next(h));return false},"shift+down":function(){var h=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_next(h));return false},left:function(){var h=this.data.ui.hovered||this.data.ui.last_selected;if(h){if(h.hasClass("jstree-open")){this.close_node(h)}else{this.hover_node(this._get_prev(h))}}return false},"ctrl+left":function(){var h=this.data.ui.hovered||this.data.ui.last_selected;if(h){if(h.hasClass("jstree-open")){this.close_node(h)}else{this.hover_node(this._get_prev(h))}}return false},"shift+left":function(){var h=this.data.ui.hovered||this.data.ui.last_selected;if(h){if(h.hasClass("jstree-open")){this.close_node(h)}else{this.hover_node(this._get_prev(h))}}return false},right:function(){var h=this.data.ui.hovered||this.data.ui.last_selected;if(h&&h.length){if(h.hasClass("jstree-closed")){this.open_node(h)}else{this.hover_node(this._get_next(h))}}return false},"ctrl+right":function(){var h=this.data.ui.hovered||this.data.ui.last_selected;if(h&&h.length){if(h.hasClass("jstree-closed")){this.open_node(h)}else{this.hover_node(this._get_next(h))}}return false},"shift+right":function(){var h=this.data.ui.hovered||this.data.ui.last_selected;if(h&&h.length){if(h.hasClass("jstree-closed")){this.open_node(h)}else{this.hover_node(this._get_next(h))}}return false},space:function(){if(this.data.ui.hovered){this.data.ui.hovered.children("a:eq(0)").click()}return false},"ctrl+space":function(h){h.type="click";if(this.data.ui.hovered){this.data.ui.hovered.children("a:eq(0)").trigger(h)}return false},"shift+space":function(h){h.type="click";if(this.data.ui.hovered){this.data.ui.hovered.children("a:eq(0)").trigger(h)}return false},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=true},disable_hotkeys:function(){this.data.hotkeys.enabled=false}}})})(jQuery);(function(a){a.jstree.plugin("json_data",{__init:function(){var b=this._get_settings().json_data;if(b.progressive_unload){this.get_container().bind("after_close.jstree",function(c,h){h.rslt.obj.children("ul").remove()})}},defaults:{data:false,ajax:false,correct_state:true,progressive_render:false,progressive_unload:false},_fn:{load_node:function(c,j,i){var b=this;this.load_node_json(c,function(){b.__callback({obj:b._get_node(c)});j.call(this)},i)},_is_loaded:function(b){var c=this._get_settings().json_data;b=this._get_node(b);return b==-1||!b||(!c.ajax&&!c.progressive_render&&!a.isFunction(c.data))||b.is(".jstree-open, .jstree-leaf")||b.children("ul").children("li").length>0},refresh:function(b){b=this._get_node(b);var c=this._get_settings().json_data;if(b&&b!==-1&&c.progressive_unload&&(a.isFunction(c.data)||!!c.ajax)){b.removeData("jstree_children")}return this.__call_old()},load_node_json:function(l,p,n){var m=this.get_settings().json_data,b,o=function(){},c=function(){};l=this._get_node(l);if(l&&l!==-1&&(m.progressive_render||m.progressive_unload)&&!l.is(".jstree-open, .jstree-leaf")&&l.children("ul").children("li").length===0&&l.data("jstree_children")){b=this._parse_json(l.data("jstree_children"),l);if(b){l.append(b);if(!m.progressive_unload){l.removeData("jstree_children")}}this.clean_node(l);if(p){p.call(this)}return}if(l&&l!==-1){if(l.data("jstree_is_loading")){return}else{l.data("jstree_is_loading",true)}}switch(!0){case (!m.data&&!m.ajax):throw"Neither data nor ajax settings supplied.";case (a.isFunction(m.data)):m.data.call(this,l,a.proxy(function(g){g=this._parse_json(g,l);if(!g){if(l===-1||!l){if(m.correct_state){this.get_container().children("ul").empty()}}else{l.children("a.jstree-loading").removeClass("jstree-loading");l.removeData("jstree_is_loading");if(m.correct_state){this.correct_state(l)}}if(n){n.call(this)}}else{if(l===-1||!l){this.get_container().children("ul").empty().append(g.children())}else{l.append(g).children("a.jstree-loading").removeClass("jstree-loading");l.removeData("jstree_is_loading")}this.clean_node(l);if(p){p.call(this)}}},this));break;case (!!m.data&&!m.ajax)||(!!m.data&&!!m.ajax&&(!l||l===-1)):if(!l||l==-1){b=this._parse_json(m.data,l);if(b){this.get_container().children("ul").empty().append(b.children());this.clean_node()}else{if(m.correct_state){this.get_container().children("ul").empty()}}}if(p){p.call(this)}break;case (!m.data&&!!m.ajax)||(!!m.data&&!!m.ajax&&l&&l!==-1):o=function(g,j,i){var h=this.get_settings().json_data.ajax.error;if(h){h.call(this,g,j,i)}if(l!=-1&&l.length){l.children("a.jstree-loading").removeClass("jstree-loading");l.removeData("jstree_is_loading");if(j==="success"&&m.correct_state){this.correct_state(l)}}else{if(j==="success"&&m.correct_state){this.get_container().children("ul").empty()}}if(n){n.call(this)}};c=function(i,g,h){var j=this.get_settings().json_data.ajax.success;if(j){i=j.call(this,i,g,h)||i}if(i===""||(i&&i.toString&&i.toString().replace(/^[\s\n]+$/,"")==="")||(!a.isArray(i)&&!a.isPlainObject(i))){return o.call(this,h,g,"")}i=this._parse_json(i,l);if(i){if(l===-1||!l){this.get_container().children("ul").empty().append(i.children())}else{l.append(i).children("a.jstree-loading").removeClass("jstree-loading");l.removeData("jstree_is_loading")}this.clean_node(l);if(p){p.call(this)}}else{if(l===-1||!l){if(m.correct_state){this.get_container().children("ul").empty();if(p){p.call(this)}}}else{l.children("a.jstree-loading").removeClass("jstree-loading");l.removeData("jstree_is_loading");if(m.correct_state){this.correct_state(l);if(p){p.call(this)}}}}};m.ajax.context=this;m.ajax.error=o;m.ajax.success=c;if(!m.ajax.dataType){m.ajax.dataType="json"}if(a.isFunction(m.ajax.url)){m.ajax.url=m.ajax.url.call(this,l)}if(a.isFunction(m.ajax.data)){m.ajax.data=m.ajax.data.call(this,l)}a.ajax(m.ajax);break}},_parse_json:function(y,t,c){var p=false,x=this._get_settings(),z=x.json_data,b=x.core.html_titles,s,v,w,i,j;if(!y){return p}if(z.progressive_unload&&t&&t!==-1){t.data("jstree_children",p)}if(a.isArray(y)){p=a();if(!y.length){return false}for(v=0,w=y.length;v<w;v++){s=this._parse_json(y[v],t,true);if(s.length){p=p.add(s)}}}else{if(typeof y=="string"){y={data:y}}if(!y.data&&y.data!==""){return p}p=a("<li />");if(y.attr){p.attr(y.attr)}if(y.metadata){p.data(y.metadata)}if(y.state){p.addClass("jstree-"+y.state)}if(!a.isArray(y.data)){s=y.data;y.data=[];y.data.push(s)}a.each(y.data,function(h,g){s=a("<a />");if(a.isFunction(g)){g=g.call(this,y)}if(typeof g=="string"){s.attr("href","#")[b?"html":"text"](g)}else{if(!g.attr){g.attr={}}if(!g.attr.href){g.attr.href="#"}s.attr(g.attr)[b?"html":"text"](y.title);if(g.language){s.addClass(g.language)}}if(y.attr.num){s.prepend("<ins class='jstree-icon'>&#160;</ins><span class='treenum'>"+y.attr.num+"</span> ")}else{s.prepend("<ins class='jstree-icon'>&#160;</ins> ")}if(!g.icon&&y.icon){g.icon=y.icon}if(g.icon){if(g.icon.indexOf("/")===-1){s.children("ins").addClass(g.icon)}else{s.children("ins").css("background","url('"+g.icon+"') center center no-repeat")}}p.append(s)});p.prepend("<ins class='jstree-icon'>&#160;</ins>");if(y.children){if(z.progressive_render&&y.state!=="open"){p.addClass("jstree-closed").data("jstree_children",y.children)}else{if(z.progressive_unload){p.data("jstree_children",y.children)}if(a.isArray(y.children)&&y.children.length){s=this._parse_json(y.children,t,true);if(s.length){j=a("<ul />");j.append(s);p.append(j)}}}}}if(!c){i=a("<ul />");i.append(p);p=i}return p},get_json:function(w,z,B,s){var b=[],c=this._get_settings(),v=this,x,y,t,u,r,A;w=this._get_node(w);if(!w||w===-1){w=this.get_container().find("> ul > li")}z=a.isArray(z)?z:["id","class"];if(!s&&this.data.types){z.push(c.types.type_attr)}B=a.isArray(B)?B:[];w.each(function(){t=a(this);x={data:[]};if(z.length){x.attr={}}a.each(z,function(g,h){y=t.attr(h);if(y&&y.length&&y.replace(/jstree[^ ]*/ig,"").length){x.attr[h]=(" "+y).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}});if(t.hasClass("jstree-open")){x.state="open"}if(t.hasClass("jstree-closed")){x.state="closed"}if(t.data()){x.metadata=t.data()}u=t.children("a");u.each(function(){r=a(this);if(B.length||a.inArray("languages",c.plugins)!==-1||r.children("ins").get(0).style.backgroundImage.length||(r.children("ins").get(0).className&&r.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length)){A=false;if(a.inArray("languages",c.plugins)!==-1&&a.isArray(c.languages)&&c.languages.length){a.each(c.languages,function(h,g){if(r.hasClass(g)){A=g;return false}})}y={attr:{},title:v.get_text(r,A)};a.each(B,function(h,g){y.attr[g]=(" "+(r.attr(g)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")});if(a.inArray("languages",c.plugins)!==-1&&a.isArray(c.languages)&&c.languages.length){a.each(c.languages,function(h,g){if(r.hasClass(g)){y.language=g;return true}})}if(r.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length){y.icon=r.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}if(r.children("ins").get(0).style.backgroundImage.length){y.icon=r.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")}}else{y=v.get_text(r)}if(u.length>1){x.data.push(y)}else{x.data=y}});t=t.find("> ul > li");if(t.length){x.children=v.get_json(t,z,B,true)}b.push(x)});return b}}})})(jQuery);(function(a){a.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(c){var b=this._get_settings().languages,i=false,j=".jstree-"+this.get_index()+" a";if(!a.isArray(b)||b.length===0){return false}if(a.inArray(c,b)==-1){if(!!b[c]){c=b[c]}else{return false}}if(c==this.data.languages.current_language){return true}i=a.vakata.css.get_css(j+"."+this.data.languages.current_language,false,this.data.languages.language_css);if(i!==false){i.style.display="none"}i=a.vakata.css.get_css(j+"."+c,false,this.data.languages.language_css);if(i!==false){i.style.display=""}this.data.languages.current_language=c;this.__callback(c);return true},get_lang:function(){return this.data.languages.current_language},_get_string:function(j,b){var c=this._get_settings().languages,i=this._get_settings().core.strings;if(a.isArray(c)&&c.length){b=(b&&a.inArray(b,c)!=-1)?b:this.data.languages.current_language}if(i[b]&&i[b][j]){return i[b][j]}if(i[j]){return i[j]}return j},get_text:function(c,b){c=this._get_node(c)||this.data.ui.last_selected;if(!c.size()){return false}var i=this._get_settings().languages,j=this._get_settings().core.html_titles;if(a.isArray(i)&&i.length){b=(b&&a.inArray(b,i)!=-1)?b:this.data.languages.current_language;c=c.children("a."+b)}else{c=c.children("a:eq(0)")}if(j){c=c.clone();c.children("INS").remove();return c.html()}else{c=c.contents().filter(function(){return this.nodeType==3})[0];return c.nodeValue}},set_text:function(k,b,c){k=this._get_node(k)||this.data.ui.last_selected;if(!k.size()){return false}var l=this._get_settings().languages,m=this._get_settings().core.html_titles,n;if(a.isArray(l)&&l.length){c=(c&&a.inArray(c,l)!=-1)?c:this.data.languages.current_language;k=k.children("a."+c)}else{k=k.children("a:eq(0)")}if(m){n=k.children("INS").clone();k.html(b).prepend(n);this.__callback({obj:k,name:b,lang:c});return true}else{k=k.contents().filter(function(){return this.nodeType==3})[0];this.__callback({obj:k,name:b,lang:c});return(k.nodeValue=b)}},_load_css:function(){var c=this._get_settings().languages,b="/* languages css */",j=".jstree-"+this.get_index()+" a",i;if(a.isArray(c)&&c.length){this.data.languages.current_language=c[0];for(i=0;i<c.length;i++){b+=j+"."+c[i]+" {";if(c[i]!=this.data.languages.current_language){b+=" display:none; "}b+=" } "}this.data.languages.language_css=a.vakata.css.add_sheet({str:b,title:"jstree-languages"})}},create_node:function(c,l,j,b){var k=this.__call_old(true,c,l,j,function(i){var g=this._get_settings().languages,n=i.children("a"),h;if(a.isArray(g)&&g.length){for(h=0;h<g.length;h++){if(!n.is("."+g[h])){i.append(n.eq(0).clone().removeClass(g.join(" ")).addClass(g[h]))}}n.not("."+g.join(", .")).remove()}if(b){b.call(this,i)}});return k}}})})(jQuery);(function(a){a.jstree.plugin("cookies",{__init:function(){if(typeof a.cookie==="undefined"){throw"jsTree cookie: jQuery cookie plugin not included."}var b=this._get_settings().cookies,c;if(!!b.save_loaded){c=a.cookie(b.save_loaded);if(c&&c.length){this.data.core.to_load=c.split(",")}}if(!!b.save_opened){c=a.cookie(b.save_opened);if(c&&c.length){this.data.core.to_open=c.split(",")}}if(!!b.save_selected){c=a.cookie(b.save_selected);if(c&&c.length&&this.data.ui){this.data.ui.to_select=c.split(",")}}this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",a.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",a.proxy(function(h){if(this._get_settings().cookies.auto_save){this.save_cookie((h.handleObj.namespace+h.handleObj.type).replace("jstree",""))}},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:true,cookie_options:{}},_fn:{save_cookie:function(b){if(this.data.core.refreshing){return}var c=this._get_settings().cookies;if(!b){if(c.save_loaded){this.save_loaded();a.cookie(c.save_loaded,this.data.core.to_load.join(","),c.cookie_options)}if(c.save_opened){this.save_opened();a.cookie(c.save_opened,this.data.core.to_open.join(","),c.cookie_options)}if(c.save_selected&&this.data.ui){this.save_selected();a.cookie(c.save_selected,this.data.ui.to_select.join(","),c.cookie_options)}return}switch(b){case"open_node":case"close_node":if(!!c.save_opened){this.save_opened();a.cookie(c.save_opened,this.data.core.to_open.join(","),c.cookie_options)}if(!!c.save_loaded){this.save_loaded();a.cookie(c.save_loaded,this.data.core.to_load.join(","),c.cookie_options)}break;case"select_node":case"deselect_node":if(!!c.save_selected&&this.data.ui){this.save_selected();a.cookie(c.save_selected,this.data.ui.to_select.join(","),c.cookie_options)}break}}}})})(jQuery);(function(a){a.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",a.proxy(function(b,i){var c=this._get_node(i.rslt.obj);c=c===-1?this.get_container().children("ul"):c.children("ul");this.sort(c)},this)).bind("rename_node.jstree create_node.jstree create.jstree",a.proxy(function(b,c){this.sort(c.rslt.obj.parent())},this)).bind("move_node.jstree",a.proxy(function(b,c){var i=c.rslt.np==-1?this.get_container():c.rslt.np;this.sort(i.children("ul"))},this))},defaults:function(b,c){return this.get_text(b)>this.get_text(c)?1:-1},_fn:{sort:function(b){var c=this._get_settings().sort,h=this;b.append(a.makeArray(b.children("li")).sort(a.proxy(c,h)));b.find("> li > ul").each(function(){h.sort(a(this))});this.clean_node(b)}}})})(jQuery);(function(m){var r=false,t=false,q=false,p=false,c=false,s=false,a=false,b=false,o=false;m.vakata.dnd={is_down:false,is_drag:false,helper:false,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(h,i,g){if(m.vakata.dnd.is_drag){m.vakata.drag_stop({})}try{h.currentTarget.unselectable="on";h.currentTarget.onselectstart=function(){return false};if(h.currentTarget.style){h.currentTarget.style.MozUserSelect="none"}}catch(j){}m.vakata.dnd.init_x=h.pageX;m.vakata.dnd.init_y=h.pageY;m.vakata.dnd.user_data=i;m.vakata.dnd.is_down=true;m.vakata.dnd.helper=m("<div id='vakata-dragged' />").html(g);m(document).bind("mousemove",m.vakata.dnd.drag);m(document).bind("mouseup",m.vakata.dnd.drag_stop);return false},drag:function(i){if(!m.vakata.dnd.is_down){return}if(!m.vakata.dnd.is_drag){if(Math.abs(i.pageX-m.vakata.dnd.init_x)>5||Math.abs(i.pageY-m.vakata.dnd.init_y)>5){m.vakata.dnd.helper.appendTo("body");m.vakata.dnd.is_drag=true;m(document).triggerHandler("drag_start.vakata",{event:i,data:m.vakata.dnd.user_data})}else{return}}if(i.type==="mousemove"){var h=m(document),j=h.scrollTop(),g=h.scrollLeft();if(i.pageY-j<20){if(s&&a==="down"){clearInterval(s);s=false}if(!s){a="up";s=setInterval(function(){m(document).scrollTop(m(document).scrollTop()-m.vakata.dnd.scroll_spd)},150)}}else{if(s&&a==="up"){clearInterval(s);s=false}}if(m(window).height()-(i.pageY-j)<20){if(s&&a==="up"){clearInterval(s);s=false}if(!s){a="down";s=setInterval(function(){m(document).scrollTop(m(document).scrollTop()+m.vakata.dnd.scroll_spd)},150)}}else{if(s&&a==="down"){clearInterval(s);s=false}}if(i.pageX-g<20){if(c&&b==="right"){clearInterval(c);c=false}if(!c){b="left";c=setInterval(function(){m(document).scrollLeft(m(document).scrollLeft()-m.vakata.dnd.scroll_spd)},150)}}else{if(c&&b==="left"){clearInterval(c);c=false}}if(m(window).width()-(i.pageX-g)<20){if(c&&b==="left"){clearInterval(c);c=false}if(!c){b="right";c=setInterval(function(){m(document).scrollLeft(m(document).scrollLeft()+m.vakata.dnd.scroll_spd)},150)}}else{if(c&&b==="right"){clearInterval(c);c=false}}}m.vakata.dnd.helper.css({left:(i.pageX+m.vakata.dnd.helper_left)+"px",top:(i.pageY+m.vakata.dnd.helper_top)+"px"});m(document).triggerHandler("drag.vakata",{event:i,data:m.vakata.dnd.user_data})},drag_stop:function(g){if(c){clearInterval(c)}if(s){clearInterval(s)}m(document).unbind("mousemove",m.vakata.dnd.drag);m(document).unbind("mouseup",m.vakata.dnd.drag_stop);m(document).triggerHandler("drag_stop.vakata",{event:g,data:m.vakata.dnd.user_data});m.vakata.dnd.helper.remove();m.vakata.dnd.init_x=0;m.vakata.dnd.init_y=0;m.vakata.dnd.user_data={};m.vakata.dnd.is_down=false;m.vakata.dnd.is_drag=false}};m(function(){var g="#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ";m.vakata.css.add_sheet({str:g,title:"vakata"})});m.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:false,after:false,inside:false,before:false,off:false,prepared:false,w:0,to1:false,to2:false,cof:false,cw:false,ch:false,i1:false,i2:false,mto:false};this.get_container().bind("mouseenter.jstree",m.proxy(function(h){if(m.vakata.dnd.is_drag&&m.vakata.dnd.user_data.jstree){if(this.data.themes){q.attr("class","jstree-"+this.data.themes.theme);if(p){p.attr("class","jstree-"+this.data.themes.theme)}m.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)}if(h.currentTarget===h.target&&m.vakata.dnd.user_data.obj&&m(m.vakata.dnd.user_data.obj).length&&m(m.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==h.target){var i=m.jstree._reference(h.target),j;if(i.data.dnd.foreign){j=i._get_settings().dnd.drag_check.call(this,{o:r,r:i.get_container(),is_root:true});if(j===true||j.inside===true||j.before===true||j.after===true){m.vakata.dnd.helper.children("ins").attr("class","jstree-ok")}}else{i.prepare_move(r,i.get_container(),"last");if(i.check_move()){m.vakata.dnd.helper.children("ins").attr("class","jstree-ok")}}}}},this)).bind("mouseup.jstree",m.proxy(function(h){if(m.vakata.dnd.is_drag&&m.vakata.dnd.user_data.jstree&&h.currentTarget===h.target&&m.vakata.dnd.user_data.obj&&m(m.vakata.dnd.user_data.obj).length&&m(m.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==h.target){var i=m.jstree._reference(h.currentTarget),j;if(i.data.dnd.foreign){j=i._get_settings().dnd.drag_check.call(this,{o:r,r:i.get_container(),is_root:true});if(j===true||j.inside===true||j.before===true||j.after===true){i._get_settings().dnd.drag_finish.call(this,{o:r,r:i.get_container(),is_root:true})}}else{i.move_node(r,i.get_container(),"last",h[i._get_settings().dnd.copy_modifier+"Key"])}}},this)).bind("mouseleave.jstree",m.proxy(function(h){if(h.relatedTarget&&h.relatedTarget.id&&h.relatedTarget.id==="jstree-marker-line"){return false}if(m.vakata.dnd.is_drag&&m.vakata.dnd.user_data.jstree){if(this.data.dnd.i1){clearInterval(this.data.dnd.i1)}if(this.data.dnd.i2){clearInterval(this.data.dnd.i2)}if(this.data.dnd.to1){clearTimeout(this.data.dnd.to1)}if(this.data.dnd.to2){clearTimeout(this.data.dnd.to2)}if(m.vakata.dnd.helper.children("ins").hasClass("jstree-ok")){m.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")}}},this)).bind("mousemove.jstree",m.proxy(function(h){if(m.vakata.dnd.is_drag&&m.vakata.dnd.user_data.jstree){var i=this.get_container()[0];if(h.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw){if(this.data.dnd.i1){clearInterval(this.data.dnd.i1)}this.data.dnd.i1=setInterval(m.proxy(function(){this.scrollLeft+=m.vakata.dnd.scroll_spd},i),100)}else{if(h.pageX-24<this.data.dnd.cof.left){if(this.data.dnd.i1){clearInterval(this.data.dnd.i1)}this.data.dnd.i1=setInterval(m.proxy(function(){this.scrollLeft-=m.vakata.dnd.scroll_spd},i),100)}else{if(this.data.dnd.i1){clearInterval(this.data.dnd.i1)}}}if(h.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch){if(this.data.dnd.i2){clearInterval(this.data.dnd.i2)}this.data.dnd.i2=setInterval(m.proxy(function(){this.scrollTop+=m.vakata.dnd.scroll_spd},i),100)}else{if(h.pageY-24<this.data.dnd.cof.top){if(this.data.dnd.i2){clearInterval(this.data.dnd.i2)}this.data.dnd.i2=setInterval(m.proxy(function(){this.scrollTop-=m.vakata.dnd.scroll_spd},i),100)}else{if(this.data.dnd.i2){clearInterval(this.data.dnd.i2)}}}}},this)).bind("scroll.jstree",m.proxy(function(h){if(m.vakata.dnd.is_drag&&m.vakata.dnd.user_data.jstree&&q&&p){q.hide();p.hide()}},this)).delegate("a","mousedown.jstree",m.proxy(function(h){if(h.which===1){this.start_drag(h.currentTarget,h);return false}},this)).delegate("a","mouseenter.jstree",m.proxy(function(h){if(m.vakata.dnd.is_drag&&m.vakata.dnd.user_data.jstree){this.dnd_enter(h.currentTarget)}},this)).delegate("a","mousemove.jstree",m.proxy(function(h){if(m.vakata.dnd.is_drag&&m.vakata.dnd.user_data.jstree){if(!t||!t.length||t.children("a")[0]!==h.currentTarget){this.dnd_enter(h.currentTarget)}if(typeof this.data.dnd.off.top==="undefined"){this.data.dnd.off=m(h.target).offset()}this.data.dnd.w=(h.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height;if(this.data.dnd.w<0){this.data.dnd.w+=this.data.core.li_height}this.dnd_show()}},this)).delegate("a","mouseleave.jstree",m.proxy(function(h){if(m.vakata.dnd.is_drag&&m.vakata.dnd.user_data.jstree){if(h.relatedTarget&&h.relatedTarget.id&&h.relatedTarget.id==="jstree-marker-line"){return false}if(q){q.hide()}if(p){p.hide()}this.data.dnd.mto=setTimeout((function(i){return function(){i.dnd_leave(h)}})(this),0)}},this)).delegate("a","mouseup.jstree",m.proxy(function(h){if(m.vakata.dnd.is_drag&&m.vakata.dnd.user_data.jstree){this.dnd_finish(h)}},this));m(document).bind("drag_stop.vakata",m.proxy(function(){if(this.data.dnd.to1){clearTimeout(this.data.dnd.to1)}if(this.data.dnd.to2){clearTimeout(this.data.dnd.to2)}if(this.data.dnd.i1){clearInterval(this.data.dnd.i1)}if(this.data.dnd.i2){clearInterval(this.data.dnd.i2)}this.data.dnd.after=false;this.data.dnd.before=false;this.data.dnd.inside=false;this.data.dnd.off=false;this.data.dnd.prepared=false;this.data.dnd.w=false;this.data.dnd.to1=false;this.data.dnd.to2=false;this.data.dnd.i1=false;this.data.dnd.i2=false;this.data.dnd.active=false;this.data.dnd.foreign=false;if(q){q.css({top:"-2000px"})}if(p){p.css({top:"-2000px"})}},this)).bind("drag_start.vakata",m.proxy(function(h,j){if(j.data.jstree){var i=m(j.event.target);if(i.closest(".jstree").hasClass("jstree-"+this.get_index())){this.dnd_enter(i)}}},this));var g=this._get_settings().dnd;if(g.drag_target){m(document).delegate(g.drag_target,"mousedown.jstree-"+this.get_index(),m.proxy(function(h){r=h.target;m.vakata.dnd.drag_start(h,{jstree:true,obj:h.target},"<ins class='jstree-icon'></ins>"+m(h.target).text());if(this.data.themes){if(q){q.attr("class","jstree-"+this.data.themes.theme)}if(p){p.attr("class","jstree-"+this.data.themes.theme)}m.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)}m.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var i=this.get_container();this.data.dnd.cof=i.offset();this.data.dnd.cw=parseInt(i.width(),10);this.data.dnd.ch=parseInt(i.height(),10);this.data.dnd.foreign=true;h.preventDefault()},this))}if(g.drop_target){m(document).delegate(g.drop_target,"mouseenter.jstree-"+this.get_index(),m.proxy(function(h){if(this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:r,r:m(h.target),e:h})){m.vakata.dnd.helper.children("ins").attr("class","jstree-ok")}},this)).delegate(g.drop_target,"mouseleave.jstree-"+this.get_index(),m.proxy(function(h){if(this.data.dnd.active){m.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")}},this)).delegate(g.drop_target,"mouseup.jstree-"+this.get_index(),m.proxy(function(h){if(this.data.dnd.active&&m.vakata.dnd.helper.children("ins").hasClass("jstree-ok")){this._get_settings().dnd.drop_finish.call(this,{o:r,r:m(h.target),e:h})}},this))}},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".jstree-drop",drop_check:function(g){return true},drop_finish:m.noop,drag_target:".jstree-draggable",drag_finish:m.noop,drag_check:function(g){return{after:false,before:false,inside:true}}},_fn:{dnd_prepare:function(){if(!t||!t.length){return}this.data.dnd.off=t.offset();if(this._get_settings().core.rtl){this.data.dnd.off.right=this.data.dnd.off.left+t.width()}if(this.data.dnd.foreign){var g=this._get_settings().dnd.drag_check.call(this,{o:r,r:t});this.data.dnd.after=g.after;this.data.dnd.before=g.before;this.data.dnd.inside=g.inside;this.data.dnd.prepared=true;return this.dnd_show()}this.prepare_move(r,t,"before");this.data.dnd.before=this.check_move();this.prepare_move(r,t,"after");this.data.dnd.after=this.check_move();if(this._is_loaded(t)){this.prepare_move(r,t,"inside");this.data.dnd.inside=this.check_move()}else{this.data.dnd.inside=false}this.data.dnd.prepared=true;return this.dnd_show()},dnd_show:function(){if(!this.data.dnd.prepared){return}var i=["before","inside","after"],g=false,j=this._get_settings().core.rtl,h;if(this.data.dnd.w<this.data.core.li_height/3){i=["before","inside","after"]}else{if(this.data.dnd.w<=this.data.core.li_height*2/3){i=this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]}else{i=["after","inside","before"]}}m.each(i,m.proxy(function(l,k){if(this.data.dnd[k]){m.vakata.dnd.helper.children("ins").attr("class","jstree-ok");g=k;return false}},this));if(g===false){m.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")}h=j?(this.data.dnd.off.right-18):(this.data.dnd.off.left+10);switch(g){case"before":q.css({left:h+"px",top:(this.data.dnd.off.top-6)+"px"}).show();if(p){p.css({left:(h+8)+"px",top:(this.data.dnd.off.top-1)+"px"}).show()}break;case"after":q.css({left:h+"px",top:(this.data.dnd.off.top+this.data.core.li_height-6)+"px"}).show();if(p){p.css({left:(h+8)+"px",top:(this.data.dnd.off.top+this.data.core.li_height-1)+"px"}).show()}break;case"inside":q.css({left:h+(j?-4:4)+"px",top:(this.data.dnd.off.top+this.data.core.li_height/2-5)+"px"}).show();if(p){p.hide()}break;default:q.hide();if(p){p.hide()}break}o=g;return g},dnd_open:function(){this.data.dnd.to2=false;this.open_node(t,m.proxy(this.dnd_prepare,this),true)},dnd_finish:function(g){if(this.data.dnd.foreign){if(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside){this._get_settings().dnd.drag_finish.call(this,{o:r,r:t,p:o})}}else{this.dnd_prepare();this.move_node(r,t,o,g[this._get_settings().dnd.copy_modifier+"Key"])}r=false;t=false;q.hide();if(p){p.hide()}},dnd_enter:function(h){if(this.data.dnd.mto){clearTimeout(this.data.dnd.mto);this.data.dnd.mto=false}var g=this._get_settings().dnd;this.data.dnd.prepared=false;t=this._get_node(h);if(g.check_timeout){if(this.data.dnd.to1){clearTimeout(this.data.dnd.to1)}this.data.dnd.to1=setTimeout(m.proxy(this.dnd_prepare,this),g.check_timeout)}else{this.dnd_prepare()}if(g.open_timeout){if(this.data.dnd.to2){clearTimeout(this.data.dnd.to2)}if(t&&t.length&&t.hasClass("jstree-closed")){this.data.dnd.to2=setTimeout(m.proxy(this.dnd_open,this),g.open_timeout)}}else{if(t&&t.length&&t.hasClass("jstree-closed")){this.dnd_open()}}},dnd_leave:function(g){this.data.dnd.after=false;this.data.dnd.before=false;this.data.dnd.inside=false;m.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");q.hide();if(p){p.hide()}if(t&&t[0]===g.target.parentNode){if(this.data.dnd.to1){clearTimeout(this.data.dnd.to1);this.data.dnd.to1=false}if(this.data.dnd.to2){clearTimeout(this.data.dnd.to2);this.data.dnd.to2=false}}},start_drag:function(h,i){r=this._get_node(h);if(this.data.ui&&this.is_selected(r)){r=this._get_node(null,true)}var j=r.length>1?this._get_string("multiple_selection"):this.get_text(r),g=this.get_container();if(!this._get_settings().core.html_titles){j=j.replace(/</ig,"&lt;").replace(/>/ig,"&gt;")}m.vakata.dnd.drag_start(i,{jstree:true,obj:r},"<ins class='jstree-icon'></ins>"+j);if(this.data.themes){if(q){q.attr("class","jstree-"+this.data.themes.theme)}if(p){p.attr("class","jstree-"+this.data.themes.theme)}m.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)}this.data.dnd.cof=g.offset();this.data.dnd.cw=parseInt(g.width(),10);this.data.dnd.ch=parseInt(g.height(),10);this.data.dnd.active=true}}});m(function(){var g="#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }";m.vakata.css.add_sheet({str:g,title:"jstree"});q=m("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(h){q.hide();p.hide();h.preventDefault();h.stopImmediatePropagation();return false}).appendTo("body");p=m("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(h){if(t&&t.length){t.children("a").trigger(h);h.preventDefault();h.stopImmediatePropagation();return false}}).bind("mouseleave",function(h){var i=m(h.relatedTarget);if(i.is(".jstree")||i.closest(".jstree").length===0){if(t&&t.length){t.children("a").trigger(h);q.hide();p.hide();h.preventDefault();h.stopImmediatePropagation();return false}}}).appendTo("body");m(document).bind("drag_start.vakata",function(h,i){if(i.data.jstree){q.show();if(p){p.show()}}});m(document).bind("drag_stop.vakata",function(h,i){if(i.data.jstree){q.hide();if(p){p.hide()}}})})})(jQuery);(function(a){a.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;if(this.data.ui&&this.data.checkbox.noui){this.select_node=this.deselect_node=this.deselect_all=a.noop;this.get_selected=this.get_checked}this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",a.proxy(function(b,c){this._prepare_checkboxes(c.rslt.obj)},this)).bind("loaded.jstree",a.proxy(function(b){this._prepare_checkboxes()},this)).delegate((this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox"),"click.jstree",a.proxy(function(b){b.preventDefault();if(this._get_node(b.target).hasClass("jstree-checked")){this.uncheck_node(b.target)}else{this.check_node(b.target)}if(this.data.ui&&this.data.checkbox.noui){this.save_selected();if(this.data.cookies){this.save_cookie("select_node")}}else{b.stopImmediatePropagation();return false}},this))},defaults:{override_ui:false,two_state:false,real_checkboxes:false,checked_parent_open:true,real_checkboxes_names:function(b){return[("check_"+(b[0].id||Math.ceil(Math.random()*10000))),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},_fn:{_checkbox_notify:function(b,c){if(c.checked){this.check_node(b,false)}},_prepare_checkboxes:function(l){l=!l||l==-1?this.get_container().find("> ul > li"):this._get_node(l);if(l===false){return}var b,c=this,p,n=this._get_settings().checkbox.two_state,m=this._get_settings().checkbox.real_checkboxes,o=this._get_settings().checkbox.real_checkboxes_names;l.each(function(){p=a(this);b=p.is("li")&&(p.hasClass("jstree-checked")||(m&&p.children(":checked").length))?"jstree-checked":"jstree-unchecked";p.find("li").andSelf().each(function(){var g=a(this),h;g.children("a"+(c.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(n?"jstree-unchecked":b);if(m){if(!g.children(":checkbox").length){h=o.call(c,g);g.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+h[0]+"' name='"+h[0]+"' value='"+h[1]+"' />")}else{g.children(":checkbox").addClass("jstree-real-checkbox")}}if(!n){if(b==="jstree-checked"||g.hasClass("jstree-checked")||g.children(":checked").length){g.find("li").andSelf().addClass("jstree-checked").children(":checkbox").prop("checked",true)}}else{if(g.hasClass("jstree-checked")||g.children(":checked").length){g.addClass("jstree-checked").children(":checkbox").prop("checked",true)}}})});if(!n){l.find(".jstree-checked").parent().parent().each(function(){c._repair_state(this)})}},change_state:function(b,c){b=this._get_node(b);var j=false,i=this._get_settings().checkbox.real_checkboxes;if(!b||b===-1){return false}c=(c===false||c===true)?c:b.hasClass("jstree-checked");if(this._get_settings().checkbox.two_state){if(c){b.removeClass("jstree-checked").addClass("jstree-unchecked");if(i){b.children(":checkbox").prop("checked",false)}}else{b.removeClass("jstree-unchecked").addClass("jstree-checked");if(i){b.children(":checkbox").prop("checked",true)}}}else{if(c){j=b.find("li").andSelf();if(!j.filter(".jstree-checked, .jstree-undetermined").length){return false}j.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");if(i){j.children(":checkbox").prop("checked",false)}}else{j=b.find("li").andSelf();if(!j.filter(".jstree-unchecked, .jstree-undetermined").length){return false}j.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");if(i){j.children(":checkbox").prop("checked",true)}if(this.data.ui){this.data.ui.last_selected=b}this.data.checkbox.last_selected=b}b.parentsUntil(".jstree","li").each(function(){var g=a(this);if(c){if(g.children("ul").children("li.jstree-checked, li.jstree-undetermined").length){g.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");if(i){g.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",false)}return false}else{g.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");if(i){g.children(":checkbox").prop("checked",false)}}}else{if(g.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length){g.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");if(i){g.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",false)}return false}else{g.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");if(i){g.children(":checkbox").prop("checked",true)}}}})}if(this.data.ui&&this.data.checkbox.noui){this.data.ui.selected=this.get_checked()}this.__callback(b);return true},check_node:function(b){if(this.change_state(b,false)){b=this._get_node(b);if(this._get_settings().checkbox.checked_parent_open){var c=this;b.parents(".jstree-closed").each(function(){c.open_node(this,false,true)})}this.__callback({obj:b})}},uncheck_node:function(b){if(this.change_state(b,true)){this.__callback({obj:this._get_node(b)})}},check_all:function(){var b=this,c=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");c.each(function(){b.change_state(this,false)});this.__callback()},uncheck_all:function(){var b=this,c=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");c.each(function(){b.change_state(this,true)});this.__callback()},is_checked:function(b){b=this._get_node(b);return b.length?b.is(".jstree-checked"):false},get_checked:function(b,c){b=!b||b===-1?this.get_container():this._get_node(b);return c||this._get_settings().checkbox.two_state?b.find(".jstree-checked"):b.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(b,c){b=!b||b===-1?this.get_container():this._get_node(b);return c||this._get_settings().checkbox.two_state?b.find(".jstree-unchecked"):b.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(c){c=this._get_node(c);if(!c.length){return}if(this._get_settings().checkbox.two_state){c.find("li").andSelf().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",true);return}var j=this._get_settings().checkbox.real_checkboxes,k=c.find("> ul > .jstree-checked").length,l=c.find("> ul > .jstree-undetermined").length,b=c.find("> ul > li").length;if(b===0){if(c.hasClass("jstree-undetermined")){this.change_state(c,false)}}else{if(k===0&&l===0){this.change_state(c,true)}else{if(k===b){this.change_state(c,false)}else{c.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");if(j){c.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",false)}}}}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var b=this,c=this.data.ui.to_select;c=a.map(a.makeArray(c),function(h){return"#"+h.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.deselect_all();a.each(c,function(j,i){b.check_node(i)});this.__callback()}else{this.__call_old()}},save_loaded:function(){var b=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){if(this.id){b.data.core.to_load.push("#"+this.id)}})}}});a(function(){var b=".jstree .jstree-real-checkbox { display:none; } ";a.vakata.css.add_sheet({str:b,title:"jstree"})})})(jQuery);(function(a){a.vakata.xslt=function(s,r,v){var u="",o,t,p,q;if(document.recalc){o=document.createElement("xml");t=document.createElement("xml");o.innerHTML=s;t.innerHTML=r;a("body").append(o).append(t);setTimeout((function(h,i,g){return function(){g.call(null,h.transformNode(i.XMLDocument));setTimeout((function(j,k){return function(){a(j).remove();a(k).remove()}})(h,i),200)}})(o,t,v),100);return true}if(typeof window.DOMParser!=="undefined"&&typeof window.XMLHttpRequest!=="undefined"&&typeof window.XSLTProcessor==="undefined"){s=new DOMParser().parseFromString(s,"text/xml");r=new DOMParser().parseFromString(r,"text/xml")}if(typeof window.DOMParser!=="undefined"&&typeof window.XMLHttpRequest!=="undefined"&&typeof window.XSLTProcessor!=="undefined"){p=new XSLTProcessor();q=a.isFunction(p.transformDocument)?(typeof window.XMLSerializer!=="undefined"):true;if(!q){return false}s=new DOMParser().parseFromString(s,"text/xml");r=new DOMParser().parseFromString(r,"text/xml");if(a.isFunction(p.transformDocument)){u=document.implementation.createDocument("","",null);p.transformDocument(s,r,u,null);v.call(null,new XMLSerializer().serializeToString(u));return true}else{p.importStylesheet(r);u=p.transformToFragment(s,document);v.call(null,a("<div />").append(u).html());return true}}return false};var b={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">	<xsl:call-template name="nodes">		<xsl:with-param name="node" select="/root" />	</xsl:call-template></xsl:template><xsl:template name="nodes">	<xsl:param name="node" />	<ul>	<xsl:for-each select="$node/item">		<xsl:variable name="children" select="count(./item) &gt; 0" />		<li>			<xsl:attribute name="class">				<xsl:if test="position() = last()">jstree-last </xsl:if>				<xsl:choose>					<xsl:when test="@state = \'open\'">jstree-open </xsl:when>					<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>					<xsl:otherwise>jstree-leaf </xsl:otherwise>				</xsl:choose>				<xsl:value-of select="@class" />			</xsl:attribute>			<xsl:for-each select="@*">				<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">					<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>				</xsl:if>			</xsl:for-each>	<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>			<xsl:for-each select="content/name">				<a>				<xsl:attribute name="href">					<xsl:choose>					<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>					<xsl:otherwise>#</xsl:otherwise>					</xsl:choose>				</xsl:attribute>				<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>				<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>				<xsl:for-each select="@*">					<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">						<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>					</xsl:if>				</xsl:for-each>					<ins>						<xsl:attribute name="class">jstree-icon 							<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>						</xsl:attribute>						<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>						<xsl:text>&#xa0;</xsl:text>					</ins>					<xsl:copy-of select="./child::node()" />				</a>			</xsl:for-each>			<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>		</li>	</xsl:for-each>	</ul></xsl:template></xsl:stylesheet>',flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">	<ul>	<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">		<xsl:call-template name="nodes">			<xsl:with-param name="node" select="." />			<xsl:with-param name="is_last" select="number(position() = last())" />		</xsl:call-template>	</xsl:for-each>	</ul></xsl:template><xsl:template name="nodes">	<xsl:param name="node" />	<xsl:param name="is_last" />	<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />	<li>	<xsl:attribute name="class">		<xsl:if test="$is_last = true()">jstree-last </xsl:if>		<xsl:choose>			<xsl:when test="@state = \'open\'">jstree-open </xsl:when>			<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>			<xsl:otherwise>jstree-leaf </xsl:otherwise>		</xsl:choose>		<xsl:value-of select="@class" />	</xsl:attribute>	<xsl:for-each select="@*">		<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">		<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>		</xsl:if>	</xsl:for-each>	<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>	<xsl:for-each select="content/name">		<a>		<xsl:attribute name="href">			<xsl:choose>			<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>			<xsl:otherwise>#</xsl:otherwise>			</xsl:choose>		</xsl:attribute>		<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>		<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>		<xsl:for-each select="@*">			<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">				<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>			</xsl:if>		</xsl:for-each>			<ins>				<xsl:attribute name="class">jstree-icon 					<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>				</xsl:attribute>				<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>				<xsl:text>&#xa0;</xsl:text>			</ins>			<xsl:copy-of select="./child::node()" />		</a>	</xsl:for-each>	<xsl:if test="$children">		<ul>		<xsl:for-each select="//item[@parent_id=$node/attribute::id]">			<xsl:call-template name="nodes">				<xsl:with-param name="node" select="." />				<xsl:with-param name="is_last" select="number(position() = last())" />			</xsl:call-template>		</xsl:for-each>		</ul>	</xsl:if>	</li></xsl:template></xsl:stylesheet>'},c=function(h){return h.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};a.jstree.plugin("xml_data",{defaults:{data:false,ajax:false,xsl:"flat",clean_node:false,correct_state:true,get_skip_empty:false,get_include_preamble:true},_fn:{load_node:function(l,n,m){var k=this;this.load_node_xml(l,function(){k.__callback({obj:k._get_node(l)});n.call(this)},m)},_is_loaded:function(i){var j=this._get_settings().xml_data;i=this._get_node(i);return i==-1||!i||(!j.ajax&&!a.isFunction(j.data))||i.is(".jstree-open, .jstree-leaf")||i.children("ul").children("li").size()>0},load_node_xml:function(n,r,p){var o=this.get_settings().xml_data,q=function(){},m=function(){};n=this._get_node(n);if(n&&n!==-1){if(n.data("jstree_is_loading")){return}else{n.data("jstree_is_loading",true)}}switch(!0){case (!o.data&&!o.ajax):throw"Neither data nor ajax settings supplied.";case (a.isFunction(o.data)):o.data.call(this,n,a.proxy(function(g){this.parse_xml(g,a.proxy(function(h){if(h){h=h.replace(/ ?xmlns="[^"]*"/ig,"");if(h.length>10){h=a(h);if(n===-1||!n){this.get_container().children("ul").empty().append(h.children())}else{n.children("a.jstree-loading").removeClass("jstree-loading");n.append(h);n.removeData("jstree_is_loading")}if(o.clean_node){this.clean_node(n)}if(r){r.call(this)}}else{if(n&&n!==-1){n.children("a.jstree-loading").removeClass("jstree-loading");n.removeData("jstree_is_loading");if(o.correct_state){this.correct_state(n);if(r){r.call(this)}}}else{if(o.correct_state){this.get_container().children("ul").empty();if(r){r.call(this)}}}}}},this))},this));break;case (!!o.data&&!o.ajax)||(!!o.data&&!!o.ajax&&(!n||n===-1)):if(!n||n==-1){this.parse_xml(o.data,a.proxy(function(g){if(g){g=g.replace(/ ?xmlns="[^"]*"/ig,"");if(g.length>10){g=a(g);this.get_container().children("ul").empty().append(g.children());if(o.clean_node){this.clean_node(n)}if(r){r.call(this)}}}else{if(o.correct_state){this.get_container().children("ul").empty();if(r){r.call(this)}}}},this))}break;case (!o.data&&!!o.ajax)||(!!o.data&&!!o.ajax&&n&&n!==-1):q=function(j,i,h){var g=this.get_settings().xml_data.ajax.error;if(g){g.call(this,j,i,h)}if(n!==-1&&n.length){n.children("a.jstree-loading").removeClass("jstree-loading");n.removeData("jstree_is_loading");if(i==="success"&&o.correct_state){this.correct_state(n)}}else{if(i==="success"&&o.correct_state){this.get_container().children("ul").empty()}}if(p){p.call(this)}};m=function(h,j,g){h=g.responseText;var i=this.get_settings().xml_data.ajax.success;if(i){h=i.call(this,h,j,g)||h}if(h===""||(h&&h.toString&&h.toString().replace(/^[\s\n]+$/,"")==="")){return q.call(this,g,j,"")}this.parse_xml(h,a.proxy(function(k){if(k){k=k.replace(/ ?xmlns="[^"]*"/ig,"");if(k.length>10){k=a(k);if(n===-1||!n){this.get_container().children("ul").empty().append(k.children())}else{n.children("a.jstree-loading").removeClass("jstree-loading");n.append(k);n.removeData("jstree_is_loading")}if(o.clean_node){this.clean_node(n)}if(r){r.call(this)}}else{if(n&&n!==-1){n.children("a.jstree-loading").removeClass("jstree-loading");n.removeData("jstree_is_loading");if(o.correct_state){this.correct_state(n);if(r){r.call(this)}}}else{if(o.correct_state){this.get_container().children("ul").empty();if(r){r.call(this)}}}}}},this))};o.ajax.context=this;o.ajax.error=q;o.ajax.success=m;if(!o.ajax.dataType){o.ajax.dataType="xml"}if(a.isFunction(o.ajax.url)){o.ajax.url=o.ajax.url.call(this,n)}if(a.isFunction(o.ajax.data)){o.ajax.data=o.ajax.data.call(this,n)}a.ajax(o.ajax);break}},parse_xml:function(l,j){var k=this._get_settings().xml_data;a.vakata.xslt(l,b[k.xsl],j)},get_xml:function(w,z,C,E,u){var F="",s=this._get_settings(),y=this,A,B,v,x,D;if(!w){w="flat"}if(!u){u=0}z=this._get_node(z);if(!z||z===-1){z=this.get_container().find("> ul > li")}C=a.isArray(C)?C:["id","class"];if(!u&&this.data.types&&a.inArray(s.types.type_attr,C)===-1){C.push(s.types.type_attr)}E=a.isArray(E)?E:[];if(!u){if(s.xml_data.get_include_preamble){F+='<?xml version="1.0" encoding="UTF-8"?>'}F+="<root>"}z.each(function(){F+="<item";v=a(this);a.each(C,function(g,i){var h=v.attr(i);if(!s.xml_data.get_skip_empty||typeof h!=="undefined"){F+=" "+i+'="'+c((" "+(h||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"'}});if(v.hasClass("jstree-open")){F+=' state="open"'}if(v.hasClass("jstree-closed")){F+=' state="closed"'}if(w==="flat"){F+=' parent_id="'+c(u)+'"'}F+=">";F+="<content>";x=v.children("a");x.each(function(){A=a(this);D=false;F+="<name";if(a.inArray("languages",s.plugins)!==-1){a.each(s.languages,function(h,g){if(A.hasClass(g)){F+=' lang="'+c(g)+'"';D=g;return false}})}if(E.length){a.each(E,function(i,g){var h=A.attr(g);if(!s.xml_data.get_skip_empty||typeof h!=="undefined"){F+=" "+g+'="'+c((" "+h||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"'}})}if(A.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length){F+=' icon="'+c(A.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"'}if(A.children("ins").get(0).style.backgroundImage.length){F+=' icon="'+c(A.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,""))+'"'}F+=">";F+="<![CDATA["+y.get_text(A,D)+"]]>";F+="</name>"});F+="</content>";B=v[0].id||true;v=v.find("> ul > li");if(v.length){B=y.get_xml(w,v,C,E,B)}else{B=""}if(w=="nest"){F+=B}F+="</item>";if(w=="flat"){F+=B}});if(!u){F+="</root>"}return F}}})})(jQuery);(function(a){a.expr[":"].jstree_contains=function(c,b,h){return(c.textContent||c.innerText||"").toLowerCase().indexOf(h[3].toLowerCase())>=0};a.expr[":"].jstree_title_contains=function(c,b,h){return(c.getAttribute("title")||"").toLowerCase().indexOf(h[3].toLowerCase())>=0};a.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=a();if(this._get_settings().search.show_only_matches){this.get_container().bind("search.jstree",function(b,c){a(this).children("ul").find("li").hide().removeClass("jstree-last");c.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each(function(){a(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){a(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})}},defaults:{ajax:false,search_method:"jstree_contains",show_only_matches:false},_fn:{search:function(b,n){if(a.trim(b)===""){this.clear_search();return}var k=this.get_settings().search,l=this,m=function(){},c=function(){};this.data.search.str=b;if(!n&&k.ajax!==false&&this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length>0){this.search.supress_callback=true;m=function(){};c=function(j,h,i){var g=this.get_settings().search.ajax.success;if(g){j=g.call(this,j,h,i)||j}this.data.search.to_open=j;this._search_open()};k.ajax.context=this;k.ajax.error=m;k.ajax.success=c;if(a.isFunction(k.ajax.url)){k.ajax.url=k.ajax.url.call(this,b)}if(a.isFunction(k.ajax.data)){k.ajax.data=k.ajax.data.call(this,b)}if(!k.ajax.data){k.ajax.data={search_string:b}}if(!k.ajax.dataType||/^json/.exec(k.ajax.dataType)){k.ajax.dataType="json"}a.ajax(k.ajax);return}if(this.data.search.result.length){this.clear_search()}this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+(k.search_method)+"("+this.data.search.str+")");this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){l.open_node(this,false,true)});this.__callback({nodes:this.data.search.result,str:b})},clear_search:function(b){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=a()},_search_open:function(k){var b=this,l=true,c=[],j=[];if(this.data.search.to_open.length){a.each(this.data.search.to_open,function(h,g){if(g=="#"){return true}if(a(g).length&&a(g).is(".jstree-closed")){c.push(g)}else{j.push(g)}});if(c.length){this.data.search.to_open=j;a.each(c,function(h,g){b.open_node(g,function(){b._search_open(true)})});l=false}}if(l){this.search(this.data.search.str,true)}}}})})(jQuery);(function(a){a.vakata.context={hide_on_mouseleave:false,cnt:a("<div id='vakata-contextmenu' />"),vis:false,tgt:false,par:false,func:false,data:false,rtl:false,show:function(b,c,p,r,s,v,q){a.vakata.context.rtl=!!q;var t=a.vakata.context.parse(b),u,h;if(!t){return}a.vakata.context.vis=true;a.vakata.context.tgt=c;a.vakata.context.par=v||c||null;a.vakata.context.data=s||null;a.vakata.context.cnt.html(t).css({visibility:"hidden",display:"block",left:0,top:0});if(a.vakata.context.hide_on_mouseleave){a.vakata.context.cnt.one("mouseleave",function(g){a.vakata.context.hide()})}u=a.vakata.context.cnt.height();h=a.vakata.context.cnt.width();if(p+h>a(document).width()){p=a(document).width()-(h+5);a.vakata.context.cnt.find("li > ul").addClass("right")}if(r+u>a(document).height()){r=r-(u+c[0].offsetHeight);a.vakata.context.cnt.find("li > ul").addClass("bottom")}a.vakata.context.cnt.css({left:p,top:r}).find("li:has(ul)").bind("mouseenter",function(g){var k=a(document).width(),i=a(document).height(),j=a(this).children("ul").show();if(k!==a(document).width()){j.toggleClass("right")}if(i!==a(document).height()){j.toggleClass("bottom")}}).bind("mouseleave",function(g){a(this).children("ul").hide()}).end().css({visibility:"visible"}).show();a(document).triggerHandler("context_show.vakata")},hide:function(){a.vakata.context.vis=false;a.vakata.context.cnt.attr("class","").css({visibility:"hidden"});a(document).triggerHandler("context_hide.vakata")},parse:function(c,j){if(!c){return false}var b="",k=false,l=true;if(!j){a.vakata.context.func={}}b+="<ul>";a.each(c,function(h,g){if(!g){return true}a.vakata.context.func[h]=g.action;if(!l&&g.separator_before){b+="<li class='vakata-separator vakata-separator-before'></li>"}l=false;b+="<li class='"+(g._class||"")+(g._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";if(g.icon&&g.icon.indexOf("/")===-1){b+=" class='"+g.icon+"' "}if(g.icon&&g.icon.indexOf("/")!==-1){b+=" style='background:url("+g.icon+") center center no-repeat;' "}b+=">&#160;</ins><a href='#' rel='"+h+"'>";if(g.submenu){b+="<span style='float:"+(a.vakata.context.rtl?"left":"right")+";'>&raquo;</span>"}b+=g.label+"</a>";if(g.submenu){k=a.vakata.context.parse(g.submenu,true);if(k){b+=k}}b+="</li>";if(g.separator_after){b+="<li class='vakata-separator vakata-separator-after'></li>";l=true}});b=b.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");b+="</ul>";a(document).triggerHandler("context_parse.vakata");return b.length>10?b:false},exec:function(b){if(a.isFunction(a.vakata.context.func[b])){a.vakata.context.func[b].call(a.vakata.context.data,a.vakata.context.par);return true}else{return false}}};a(function(){var b="#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ";a.vakata.css.add_sheet({str:b,title:"vakata"});a.vakata.context.cnt.delegate("a","click",function(c){c.preventDefault()}).delegate("a","mouseup",function(c){if(!a(this).parent().hasClass("jstree-contextmenu-disabled")&&a.vakata.context.exec(a(this).attr("rel"))){a.vakata.context.hide()}else{a(this).blur()}}).delegate("a","mouseover",function(){a.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");a(document).bind("mousedown",function(c){if(a.vakata.context.vis&&!a.contains(a.vakata.context.cnt[0],c.target)){a.vakata.context.hide()}});if(typeof a.hotkeys!=="undefined"){a(document).bind("keydown","up",function(h){if(a.vakata.context.vis){var c=a.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();if(!c.length){c=a.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last()}c.addClass("vakata-hover");h.stopImmediatePropagation();h.preventDefault()}}).bind("keydown","down",function(h){if(a.vakata.context.vis){var c=a.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();if(!c.length){c=a.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first()}c.addClass("vakata-hover");h.stopImmediatePropagation();h.preventDefault()}}).bind("keydown","right",function(c){if(a.vakata.context.vis){a.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover");c.stopImmediatePropagation();c.preventDefault()}}).bind("keydown","left",function(c){if(a.vakata.context.vis){a.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover");c.stopImmediatePropagation();c.preventDefault()}}).bind("keydown","esc",function(c){a.vakata.context.hide();c.preventDefault()}).bind("keydown","space",function(c){a.vakata.context.cnt.find(".vakata-hover").last().children("a").click();c.preventDefault()})}});a.jstree.plugin("contextmenu",{__init:function(){this.get_container().delegate("a","contextmenu.jstree",a.proxy(function(b){b.preventDefault();if(!a(b.currentTarget).hasClass("jstree-loading")){this.show_contextmenu(b.currentTarget,b.pageX,b.pageY)}},this)).delegate("a","click.jstree",a.proxy(function(b){if(this.data.contextmenu){a.vakata.context.hide()}},this)).bind("destroy.jstree",a.proxy(function(){if(this.data.contextmenu){a.vakata.context.hide()}},this));a(document).bind("context_hide.vakata",a.proxy(function(){this.data.contextmenu=false},this))},defaults:{select_node:false,show_at_node:true,items:{create:{separator_before:false,separator_after:true,label:"Create",action:function(b){this.create(b)}},rename:{separator_before:false,separator_after:false,label:"Rename",action:function(b){this.rename(b)}},remove:{separator_before:false,icon:false,separator_after:false,label:"Delete",action:function(b){if(this.is_selected(b)){this.remove()}else{this.remove(b)}}},ccp:{separator_before:true,icon:false,separator_after:false,label:"Edit",action:false,submenu:{cut:{separator_before:false,separator_after:false,label:"Cut",action:function(b){this.cut(b)}},copy:{separator_before:false,icon:false,separator_after:false,label:"Copy",action:function(b){this.copy(b)}},paste:{separator_before:false,icon:false,separator_after:false,label:"Paste",action:function(b){this.paste(b)}}}}}},_fn:{show_contextmenu:function(i,p,b){i=this._get_node(i);var m=this.get_settings().contextmenu,o=i.children("a:visible:eq(0)"),c=false,n=false;if(m.select_node&&this.data.ui&&!this.is_selected(i)){this.deselect_all();this.select_node(i,true)}if(m.show_at_node||typeof p==="undefined"||typeof b==="undefined"){c=o.offset();p=c.left;b=c.top+this.data.core.li_height}n=i.data("jstree")&&i.data("jstree").contextmenu?i.data("jstree").contextmenu:m.items;if(a.isFunction(n)){n=n.call(this,i)}this.data.contextmenu=true;a.vakata.context.show(n,o,p,b,this,i,this._get_settings().core.rtl);if(this.data.themes){a.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}}})})(jQuery);(function(a){a.jstree.plugin("types",{__init:function(){var b=this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",a.proxy(function(){var j=b.types,k=b.type_attr,l="",c=this;a.each(j,function(h,g){a.each(g,function(i,n){if(!/^(max_depth|max_children|icon|valid_children)$/.test(i)){c.data.types.attach_to.push(i)}});if(!g.icon){return true}if(g.icon.image||g.icon.position){if(h=="default"){l+=".jstree-"+c.get_index()+" a > .jstree-icon { "}else{l+=".jstree-"+c.get_index()+" li["+k+'="'+h+'"] > a > .jstree-icon { '}if(g.icon.image){l+=" background-image:url("+g.icon.image+"); "}if(g.icon.position){l+=" background-position:"+g.icon.position+"; "}else{l+=" background-position:0 0; "}l+="} "}});if(l!==""){a.vakata.css.add_sheet({str:l,title:"jstree-types"})}},this)).bind("before.jstree",a.proxy(function(m,n){var o,p,c=this._get_settings().types.use_data?this._get_node(n.args[0]):false,l=c&&c!==-1&&c.length?c.data("jstree"):false;if(l&&l.types&&l.types[n.func]===false){m.stopImmediatePropagation();return false}if(a.inArray(n.func,this.data.types.attach_to)!==-1){if(!n.args[0]||(!n.args[0].tagName&&!n.args[0].jquery)){return}o=this._get_settings().types.types;p=this._get_type(n.args[0]);if(((o[p]&&typeof o[p][n.func]!=="undefined")||(o["default"]&&typeof o["default"][n.func]!=="undefined"))&&this._check(n.func,n.args[0])===false){m.stopImmediatePropagation();return false}}},this));if(f){this.get_container().bind("load_node.jstree set_type.jstree",a.proxy(function(k,l){var m=l&&l.rslt&&l.rslt.obj&&l.rslt.obj!==-1?this._get_node(l.rslt.obj).parent():this.get_container_ul(),c=false,n=this._get_settings().types;a.each(n.types,function(h,g){if(g.icon&&(g.icon.image||g.icon.position)){c=h==="default"?m.find("li > a > .jstree-icon"):m.find("li["+n.type_attr+"='"+h+"'] > a > .jstree-icon");if(g.icon.image){c.css("backgroundImage","url("+g.icon.image+")")}c.css("backgroundPosition",g.icon.position||"0 0")}})},this))}},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:false,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(b,c){if(c.type&&this._get_settings().types.use_data){this.set_type(c.type,b)}},_get_type:function(b){b=this._get_node(b);return(!b||!b.length)?false:b.attr(this._get_settings().types.type_attr)||"default"},set_type:function(b,c){c=this._get_node(c);var h=(!c.length||!b)?false:c.attr(this._get_settings().types.type_attr,b);if(h){this.__callback({obj:c,type:b})}return h},_check:function(o,r,t){r=this._get_node(r);var n=false,c=this._get_type(r),p=0,q=this,b=this._get_settings().types,s=false;if(r===-1){if(!!b[o]){n=b[o]}else{return}}else{if(c===false){return}s=b.use_data?r.data("jstree"):false;if(s&&s.types&&typeof s.types[o]!=="undefined"){n=s.types[o]}else{if(!!b.types[c]&&typeof b.types[c][o]!=="undefined"){n=b.types[c][o]}else{if(!!b.types["default"]&&typeof b.types["default"][o]!=="undefined"){n=b.types["default"][o]}}}}if(a.isFunction(n)){n=n.call(this,r)}if(o==="max_depth"&&r!==-1&&t!==false&&b.max_depth!==-2&&n!==0){r.children("a:eq(0)").parentsUntil(".jstree","li").each(function(g){if(b.max_depth!==-1&&b.max_depth-(g+1)<=0){n=0;return false}p=(g===0)?n:q._check(o,this,false);if(p!==-1&&p-(g+1)<=0){n=0;return false}if(p>=0&&(p-(g+1)<n||n<0)){n=p-(g+1)}if(b.max_depth>=0&&(b.max_depth-(g+1)<n||n<0)){n=b.max_depth-(g+1)}})}return n},check_move:function(){if(!this.__call_old()){return false}var r=this._get_move(),n=r.rt._get_settings().types,c=r.rt._check("max_children",r.cr),m=r.rt._check("max_depth",r.cr),p=r.rt._check("valid_children",r.cr),o=0,b=1,q;if(p==="none"){return false}if(a.isArray(p)&&r.ot&&r.ot._get_type){r.o.each(function(){if(a.inArray(r.ot._get_type(this),p)===-1){b=false;return false}});if(b===false){return false}}if(n.max_children!==-2&&c!==-1){o=r.cr===-1?this.get_container().find("> ul > li").not(r.o).length:r.cr.find("> ul > li").not(r.o).length;if(o+r.o.length>c){return false}}if(n.max_depth!==-2&&m!==-1){b=0;if(m===0){return false}if(typeof r.o.d==="undefined"){q=r.o;while(q.length>0){q=q.find("> ul > li");b++}r.o.d=b}if(m-r.o.d<0){return false}}return true},create_node:function(w,v,y,c,t,p){if(!p&&(t||this._is_loaded(w))){var x=(typeof v=="string"&&v.match(/^before|after$/i)&&w!==-1)?this._get_parent(w):this._get_node(w),b=this._get_settings().types,r=this._check("max_children",x),s=this._check("max_depth",x),u=this._check("valid_children",x),z;if(typeof y==="string"){y={data:y}}if(!y){y={}}if(u==="none"){return false}if(a.isArray(u)){if(!y.attr||!y.attr[b.type_attr]){if(!y.attr){y.attr={}}y.attr[b.type_attr]=u[0]}else{if(a.inArray(y.attr[b.type_attr],u)===-1){return false}}}if(b.max_children!==-2&&r!==-1){z=x===-1?this.get_container().find("> ul > li").length:x.find("> ul > li").length;if(z+1>r){return false}}if(b.max_depth!==-2&&s!==-1&&(s-1)<0){return false}}return this.__call_old(true,w,v,y,c,t,p)}}})})(jQuery);(function(a){a.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(true);this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return this.nodeType==3}).remove()},defaults:{data:false,ajax:false,correct_state:true},_fn:{load_node:function(c,j,i){var b=this;this.load_node_html(c,function(){b.__callback({obj:b._get_node(c)});j.call(this)},i)},_is_loaded:function(b){b=this._get_node(b);return b==-1||!b||(!this._get_settings().html_data.ajax&&!a.isFunction(this._get_settings().html_data.data))||b.is(".jstree-open, .jstree-leaf")||b.children("ul").children("li").size()>0},load_node_html:function(l,p,n){var b,m=this.get_settings().html_data,o=function(){},c=function(){};l=this._get_node(l);if(l&&l!==-1){if(l.data("jstree_is_loading")){return}else{l.data("jstree_is_loading",true)}}switch(!0){case (a.isFunction(m.data)):m.data.call(this,l,a.proxy(function(g){if(g&&g!==""&&g.toString&&g.toString().replace(/^[\s\n]+$/,"")!==""){g=a(g);if(!g.is("ul")){g=a("<ul />").append(g)}if(l==-1||!l){this.get_container().children("ul").empty().append(g.children()).find("li, a").filter(function(){return !this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon")}else{l.children("a.jstree-loading").removeClass("jstree-loading");l.append(g).children("ul").find("li, a").filter(function(){return !this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");l.removeData("jstree_is_loading")}this.clean_node(l);if(p){p.call(this)}}else{if(l&&l!==-1){l.children("a.jstree-loading").removeClass("jstree-loading");l.removeData("jstree_is_loading");if(m.correct_state){this.correct_state(l);if(p){p.call(this)}}}else{if(m.correct_state){this.get_container().children("ul").empty();if(p){p.call(this)}}}}},this));break;case (!m.data&&!m.ajax):if(!l||l==-1){this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return !this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");this.clean_node()}if(p){p.call(this)}break;case (!!m.data&&!m.ajax)||(!!m.data&&!!m.ajax&&(!l||l===-1)):if(!l||l==-1){b=a(m.data);if(!b.is("ul")){b=a("<ul />").append(b)}this.get_container().children("ul").empty().append(b.children()).find("li, a").filter(function(){return !this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");this.clean_node()}if(p){p.call(this)}break;case (!m.data&&!!m.ajax)||(!!m.data&&!!m.ajax&&l&&l!==-1):l=this._get_node(l);o=function(g,j,i){var h=this.get_settings().html_data.ajax.error;if(h){h.call(this,g,j,i)}if(l!=-1&&l.length){l.children("a.jstree-loading").removeClass("jstree-loading");l.removeData("jstree_is_loading");if(j==="success"&&m.correct_state){this.correct_state(l)}}else{if(j==="success"&&m.correct_state){this.get_container().children("ul").empty()}}if(n){n.call(this)}};c=function(i,g,h){var j=this.get_settings().html_data.ajax.success;if(j){i=j.call(this,i,g,h)||i}if(i===""||(i&&i.toString&&i.toString().replace(/^[\s\n]+$/,"")==="")){return o.call(this,h,g,"")}if(i){i=a(i);if(!i.is("ul")){i=a("<ul />").append(i)}if(l==-1||!l){this.get_container().children("ul").empty().append(i.children()).find("li, a").filter(function(){return !this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon")}else{l.children("a.jstree-loading").removeClass("jstree-loading");l.append(i).children("ul").find("li, a").filter(function(){return !this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");l.removeData("jstree_is_loading")}this.clean_node(l);if(p){p.call(this)}}else{if(l&&l!==-1){l.children("a.jstree-loading").removeClass("jstree-loading");l.removeData("jstree_is_loading");if(m.correct_state){this.correct_state(l);if(p){p.call(this)}}}else{if(m.correct_state){this.get_container().children("ul").empty();if(p){p.call(this)}}}}};m.ajax.context=this;m.ajax.error=o;m.ajax.success=c;if(!m.ajax.dataType){m.ajax.dataType="html"}if(a.isFunction(m.ajax.url)){m.ajax.url=m.ajax.url.call(this,l)}if(a.isFunction(m.ajax.data)){m.ajax.data=m.ajax.data.call(this,l)}a.ajax(m.ajax);break}}}});a.jstree.defaults.plugins.push("html_data")})(jQuery);(function(a){a.jstree.plugin("themeroller",{__init:function(){var b=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(c){if(!a(c.currentTarget).hasClass("jstree-loading")){a(this).addClass(b.item_h)}}).delegate("a","mouseleave.jstree",function(){a(this).removeClass(b.item_h)}).bind("init.jstree",a.proxy(function(c,h){h.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");this._themeroller(h.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",a.proxy(function(c,h){this._themeroller(h.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",a.proxy(function(c){this._themeroller()},this)).bind("close_node.jstree",a.proxy(function(c,h){this._themeroller(h.rslt.obj)},this)).bind("delete_node.jstree",a.proxy(function(c,h){this._themeroller(h.rslt.parent)},this)).bind("correct_state.jstree",a.proxy(function(c,h){h.rslt.obj.children("ins.jstree-icon").removeClass(b.opened+" "+b.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return this.className.toString().replace(b.item_clsd,"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(b.item_open+" "+b.item_clsd).addClass(b.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",a.proxy(function(c,h){h.rslt.obj.children("a").addClass(b.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",a.proxy(function(c,h){this.get_container().find("a."+b.item_a).removeClass(b.item_a).end().find("a.jstree-clicked").addClass(b.item_a)},this)).bind("dehover_node.jstree",a.proxy(function(c,h){h.rslt.obj.children("a").removeClass(b.item_h)},this)).bind("hover_node.jstree",a.proxy(function(c,h){this.get_container().find("a."+b.item_h).not(h.rslt.obj).removeClass(b.item_h);h.rslt.obj.children("a").addClass(b.item_h)},this)).bind("move_node.jstree",a.proxy(function(c,h){this._themeroller(h.rslt.o);this._themeroller(h.rslt.op)},this))},__destroy:function(){var c=this._get_settings().themeroller,b=["ui-icon"];a.each(c,function(i,j){j=j.split(" ");if(j.length){b=b.concat(j)}});this.get_container().removeClass("ui-widget-content").find("."+b.join(", .")).removeClass(b.join(" "))},_fn:{_themeroller:function(b){var c=this._get_settings().themeroller;b=!b||b==-1?this.get_container_ul():this._get_node(b).parent();b.find("li.jstree-closed").children("ins.jstree-icon").removeClass(c.opened).addClass("ui-icon "+c.closed).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(c.item_leaf+" "+c.item_open).addClass(c.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(c.closed).addClass("ui-icon "+c.opened).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(c.item_leaf+" "+c.item_clsd).addClass(c.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(c.closed+" ui-icon "+c.opened).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(c.item_clsd+" "+c.item_open).addClass(c.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});a(function(){var b=".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }";a.vakata.css.add_sheet({str:b,title:"jstree"})})})(jQuery);(function(a){a.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",a.proxy(function(b,l){var o=[],m=true,c,n;if(l.func=="move_node"){if(l.args[4]===true){if(l.args[0].o&&l.args[0].o.length){l.args[0].o.children("a").each(function(){o.push(a(this).text().replace(/^\s+/g,""))});m=this._check_unique(o,l.args[0].np.find("> ul > li").not(l.args[0].o),"move_node")}}}if(l.func=="create_node"){if(l.args[4]||this._is_loaded(l.args[0])){c=this._get_node(l.args[0]);if(l.args[1]&&(l.args[1]==="before"||l.args[1]==="after")){c=this._get_parent(l.args[0]);if(!c||c===-1){c=this.get_container()}}if(typeof l.args[2]==="string"){o.push(l.args[2])}else{if(!l.args[2]||!l.args[2].data){o.push(this._get_string("new_node"))}else{o.push(l.args[2].data)}}m=this._check_unique(o,c.find("> ul > li"),"create_node")}}if(l.func=="rename_node"){o.push(l.args[1]);n=this._get_node(l.args[0]);c=this._get_parent(n);if(!c||c===-1){c=this.get_container()}m=this._check_unique(o,c.find("> ul > li").not(n),"rename_node")}if(!m){b.stopPropagation();return false}},this))},defaults:{error_callback:a.noop},_fn:{_check_unique:function(i,b,c){var j=[];b.children("a").each(function(){j.push(a(this).text().replace(/^\s+/g,""))});if(!j.length||!i.length){return true}j=j.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");if((j.length+i.length)!=j.concat(i).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length){this._get_settings().unique.error_callback.call(null,i,b,c);return false}return true},check_move:function(){if(!this.__call_old()){return false}var b=this._get_move(),c=[];if(b.o&&b.o.length){b.o.children("a").each(function(){c.push(a(this).text().replace(/^\s+/g,""))});return this._check_unique(c,b.np.find("> ul > li").not(b.o),"check_move")}return true}}})})(jQuery);(function(a){a.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui){throw"jsTree wholerow: jsTree UI plugin not included."}this.data.wholerow.html=false;this.data.wholerow.to=false;this.get_container().bind("init.jstree",a.proxy(function(b,c){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",a.proxy(function(b,c){this._prepare_wholerow_span(c&&c.rslt&&c.rslt.obj?c.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",a.proxy(function(b,c){if(this.data.to){clearTimeout(this.data.to)}this.data.to=setTimeout((function(i,g){return function(){i._prepare_wholerow_ul(g)}})(this,c&&c.rslt&&c.rslt.obj?c.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",a.proxy(function(b,c){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",a.proxy(function(b,c){c.rslt.obj.each(function(){var g=c.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+(parseInt(((a(this).offset().top-c.inst.get_container().offset().top+c.inst.get_container()[0].scrollTop)/c.inst.data.core.li_height),10))+")");g.children("a").attr("class",c.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",a.proxy(function(b,c){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));if(b.type==="hover_node"){var i=this.get_container().find(" > .jstree-wholerow li:visible:eq("+(parseInt(((c.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height),10))+")");i.children("a").attr("class",c.rslt.obj.children(".jstree-hovered").attr("class"))}},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(c){var b=a(c.currentTarget);if(c.target.tagName==="A"||(c.target.tagName==="INS"&&b.closest("li").is(".jstree-open, .jstree-closed"))){return}b.closest("li").children("a:visible:eq(0)").click();c.stopImmediatePropagation()}).delegate("li","mouseover.jstree",a.proxy(function(b){b.stopImmediatePropagation();if(a(b.currentTarget).children(".jstree-hovered, .jstree-clicked").length){return false}this.hover_node(b.currentTarget);return false},this)).delegate("li","mouseleave.jstree",a.proxy(function(b){if(a(b.currentTarget).children("a").hasClass("jstree-hovered").length){return}this.dehover_node(b.currentTarget)},this));if(d||f){a.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})}},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(b){b=!b||b==-1?this.get_container().find("> ul > li"):this._get_node(b);if(b===false){return}b.each(function(){a(this).find("li").andSelf().each(function(){var c=a(this);if(c.children(".jstree-wholerow-span").length){return true}c.prepend("<span class='jstree-wholerow-span' style='width:"+(c.parentsUntil(".jstree","li").length*18)+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var b=this.get_container().children("ul").eq(0),c=b.html();b.addClass("jstree-wholerow-real");if(this.data.wholerow.last_html!==c){this.data.wholerow.last_html=c;this.get_container().children(".jstree-wholerow").remove();this.get_container().append(b.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(b.parent()[0].scrollWidth).css("top",(b.height()+(d?5:0))*-1).find("li[id]").each(function(){this.removeAttribute("id")}).end())}}}});a(function(){var b=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";if(e){b+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } "}if(d||f){b+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } "}a.vakata.css.add_sheet({str:b,title:"jstree"})})})(jQuery);(function(c){var b=["getChildren","getChildrenCount","getAttr","getName","getProps"],a=function(j,l){var k=true;j=j||{};l=[].concat(l);c.each(l,function(g,h){if(!c.isFunction(j[h])){k=false;return false}});return k};c.jstree.plugin("model",{__init:function(){if(!this.data.json_data){throw"jsTree model: jsTree json_data plugin not included."}this._get_settings().json_data.data=function(j,l){var k=(j==-1)?this._get_settings().model.object:j.data("jstree_model");if(!a(k,b)){return l.call(null,false)}if(this._get_settings().model.async){k.getChildren(c.proxy(function(g){this.model_done(g,l)},this))}else{this.model_done(k.getChildren(),l)}}},defaults:{object:false,id_prefix:false,async:false},_fn:{model_done:function(n,l){var p=[],o=this._get_settings(),m=this;if(!c.isArray(n)){n=[n]}c.each(n,function(h,i){var g=i.getProps()||{};g.attr=i.getAttr()||{};if(i.getChildrenCount()){g.state="closed"}g.data=i.getName();if(!c.isArray(g.data)){g.data=[g.data]}if(m.data.types&&c.isFunction(i.getType)){g.attr[o.types.type_attr]=i.getType()}if(g.attr.id&&o.model.id_prefix){g.attr.id=o.model.id_prefix+g.attr.id}if(!g.metadata){g.metadata={}}g.metadata.jstree_model=i;p.push(g)});l.call(null,p)}}})})(jQuery)})();